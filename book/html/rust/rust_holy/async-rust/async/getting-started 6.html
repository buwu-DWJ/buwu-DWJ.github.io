<!DOCTYPE HTML>
<html lang="chs" class="sidebar-visible no-js ayu">

<head>
    <!-- Book generated using mdBook -->
    <meta charset="UTF-8">
    <title>async ç¼–ç¨‹å…¥é—¨ - å¸ƒæ­¦ä¸èˆ</title>


    <!-- Custom HTML head -->
    
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff" />

    <link rel="icon" href="../../../../favicon.svg">
    <link rel="shortcut icon" href="../../../../favicon.png">
    <link rel="stylesheet" href="../../../../css/variables.css">
    <link rel="stylesheet" href="../../../../css/general.css">
    <link rel="stylesheet" href="../../../../css/chrome.css">
    <link rel="stylesheet" href="../../../../css/print.css" media="print">

    <!-- Fonts -->
    <link rel="stylesheet" href="../../../../FontAwesome/css/font-awesome.css">
    <link rel="stylesheet" href="../../../../fonts/fonts.css">

    <!-- Highlight.js Stylesheets -->
    <link rel="stylesheet" href="../../../../highlight.css">
    <link rel="stylesheet" href="../../../../tomorrow-night.css">
    <link rel="stylesheet" href="../../../../ayu-highlight.css">

    <!-- Custom theme stylesheets -->
    <link rel="stylesheet" href="../../../../theme/style3.css">


</head>

<body>

    <!-- Provide site root to javascript -->
    <script type="text/javascript">
        var path_to_root = "../../../../";
        var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "ayu";
    </script>

    <!-- Work around some values being stored in localStorage wrapped in quotes -->
    <script type="text/javascript">
        try {
            var theme = localStorage.getItem('mdbook-theme');
            var sidebar = localStorage.getItem('mdbook-sidebar');
            if (theme.startsWith('"') && theme.endsWith('"')) {
                localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
            }
            if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
            }
        } catch (e) { }
    </script>

    <!-- Set the theme before any content is loaded, prevents flash -->
    <script type="text/javascript">
        var theme;
        try { theme = localStorage.getItem('mdbook-theme'); } catch (e) { }
        if (theme === null || theme === undefined) { theme = default_theme; }
        var html = document.querySelector('html');
        html.classList.remove('no-js')
        html.classList.remove('ayu')
        html.classList.add(theme);
        html.classList.add('js');
    </script>

    <!-- Hide / unhide sidebar before it is displayed -->
    <script type="text/javascript">
        var html = document.querySelector('html');
        var sidebar = 'hidden';
        if (document.body.clientWidth >= 1080) {
            try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch (e) { }
            sidebar = sidebar || 'visible';
        }
        html.classList.remove('sidebar-visible');
        html.classList.add("sidebar-" + sidebar);
    </script>

    <nav id="sidebar" class="sidebar" aria-label="Table of contents">
        <div class="sidebar-scrollbox">
            <ol class="chapter"><li class="chapter-item affix "><a href="../../../../pre.html">å‰è¨€</a></li><li class="chapter-item affix "><li class="part-title">Summary</li><li class="chapter-item "><a href="../../../../markdown/markdown.html"><strong aria-hidden="true">1.</strong> markdown&latex</a></li><li class="chapter-item "><a href="../../../../python/python.html"><strong aria-hidden="true">2.</strong> python</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../python/win32com/pre.html"><strong aria-hidden="true">2.1.</strong> win32com</a></li><li class="chapter-item "><a href="../../../../python/crawler/pre.html"><strong aria-hidden="true">2.2.</strong> crawler</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../python/crawler/BeautifulSoup.html"><strong aria-hidden="true">2.2.1.</strong> BeautifulSoup</a></li><li class="chapter-item "><a href="../../../../python/crawler/re.html"><strong aria-hidden="true">2.2.2.</strong> re</a></li></ol></li><li class="chapter-item "><a href="../../../../python/pytorch/pytorch.html"><strong aria-hidden="true">2.3.</strong> pytorch</a></li><li class="chapter-item "><a href="../../../../python/np_pd/np_pd.html"><strong aria-hidden="true">2.4.</strong> others</a></li><li class="chapter-item "><a href="../../../../python/pythonä¹‹ç¦…/pre.html"><strong aria-hidden="true">2.5.</strong> pythonä¹‹ç¦…</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../python/pythonä¹‹ç¦…/optim.html"><strong aria-hidden="true">2.5.1.</strong> ç»“æ„ä¸Šä¼˜åŒ–è¿è¡Œé€Ÿåº¦</a></li><li class="chapter-item "><a href="../../../../python/pythonä¹‹ç¦…/python_optim.html"><strong aria-hidden="true">2.5.2.</strong> å…¶ä»–ç»†èŠ‚</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../../../cpp/pre.html"><strong aria-hidden="true">3.</strong> cpp</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><div><strong aria-hidden="true">3.1.</strong> cpp_primer_plusç¬”è®°</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../cpp/cpp_primer_plus/1.åŸºç¡€/index.html"><strong aria-hidden="true">3.1.1.</strong> åŸºç¡€</a></li><li class="chapter-item "><a href="../../../../cpp/cpp_primer_plus/2.å‡½æ•°/index.html"><strong aria-hidden="true">3.1.2.</strong> å‡½æ•°</a></li><li class="chapter-item "><a href="../../../../cpp/cpp_primer_plus/3.å†…å­˜æ¨¡å‹å’Œåç§°ç©ºé—´/index.html"><strong aria-hidden="true">3.1.3.</strong> å†…å­˜æ¨¡å‹å’Œåç§°ç©ºé—´</a></li><li class="chapter-item "><a href="../../../../cpp/cpp_primer_plus/4.å¯¹è±¡å’Œç±»/index.html"><strong aria-hidden="true">3.1.4.</strong> å¯¹è±¡å’Œç±»</a></li><li class="chapter-item "><a href="../../../../cpp/cpp_primer_plus/5.ä½¿ç”¨ç±»/index.html"><strong aria-hidden="true">3.1.5.</strong> ä½¿ç”¨ç±»</a></li><li class="chapter-item "><a href="../../../../cpp/cpp_primer_plus/6.ç±»å’ŒåŠ¨æ€å†…å­˜åˆ†é…/index.html"><strong aria-hidden="true">3.1.6.</strong> ç±»å’ŒåŠ¨æ€å†…å­˜åˆ†é…</a></li><li class="chapter-item "><a href="../../../../cpp/cpp_primer_plus/7.ç±»ç»§æ‰¿/index.html"><strong aria-hidden="true">3.1.7.</strong> ç±»ç»§æ‰¿</a></li><li class="chapter-item "><a href="../../../../cpp/cpp_primer_plus/8.C++ä¸­çš„ä»£ç é‡ç”¨/index.html"><strong aria-hidden="true">3.1.8.</strong> ä»£ç é‡ç”¨</a></li><li class="chapter-item "><a href="../../../../cpp/cpp_primer_plus/9.å‹å…ƒã€å¼‚å¸¸å’Œå…¶ä»–/index.html"><strong aria-hidden="true">3.1.9.</strong> å‹å…ƒã€å¼‚å¸¸åŠå…¶ä»–</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../rust/pre.html"><strong aria-hidden="true">4.</strong> Rust</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../rust/rust_holy/pre.html"><strong aria-hidden="true">4.1.</strong> Ruståœ£ç»ğŸ‘¿æ‘˜è¦</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/pre.html"><strong aria-hidden="true">4.1.1.</strong> åŸºç¡€çŸ¥è¯†</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/basic.html"><strong aria-hidden="true">4.1.1.1.</strong> å®‰è£…åŠå…¶ä»–</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/variable.html"><strong aria-hidden="true">4.1.1.2.</strong> å˜é‡ç»‘å®šä¸è§£æ„</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/ownership/pre.html"><strong aria-hidden="true">4.1.1.3.</strong> æ‰€æœ‰æƒ,å¼•ç”¨ä¸å€Ÿç”¨</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/ownership/ownership.html"><strong aria-hidden="true">4.1.1.3.1.</strong> æ‰€æœ‰æƒ</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/ownership/borrowing.html"><strong aria-hidden="true">4.1.1.3.2.</strong> å¼•ç”¨ä¸å€Ÿç”¨</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/compound_type/pre.html"><strong aria-hidden="true">4.1.1.4.</strong> å¤åˆç±»å‹</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/compound_type/string_slice.html"><strong aria-hidden="true">4.1.1.4.1.</strong> å­—ç¬¦ä¸²ä¸åˆ‡ç‰‡</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/compound_type/tuple.html"><strong aria-hidden="true">4.1.1.4.2.</strong> å…ƒç»„</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/compound_type/struct.html"><strong aria-hidden="true">4.1.1.4.3.</strong> ç»“æ„ä½“</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/compound_type/enum.html"><strong aria-hidden="true">4.1.1.4.4.</strong> æšä¸¾</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/compound_type/array.html"><strong aria-hidden="true">4.1.1.4.5.</strong> æ•°ç»„</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/flow_control.html"><strong aria-hidden="true">4.1.1.5.</strong> æµå¼æ§åˆ¶</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/match_pattern/pre.html"><strong aria-hidden="true">4.1.1.6.</strong> æ¨¡å¼åŒ¹é…</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/match_pattern/if_let.html"><strong aria-hidden="true">4.1.1.6.1.</strong> if_let</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/match_pattern/option.html"><strong aria-hidden="true">4.1.1.6.2.</strong> option</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/match_pattern/pattern_match.html"><strong aria-hidden="true">4.1.1.6.3.</strong> æ¨¡å¼é€‚ç”¨åœºæ™¯</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/match_pattern/all_patterns.html"><strong aria-hidden="true">4.1.1.6.4.</strong> å…¨æ¨¡å¼åˆ—è¡¨</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/method.html"><strong aria-hidden="true">4.1.1.7.</strong> æ–¹æ³•method</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/generics_and_traits/pre.html"><strong aria-hidden="true">4.1.1.8.</strong> æ³›å‹å’Œç‰¹å¾</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/generics_and_traits/generic.html"><strong aria-hidden="true">4.1.1.8.1.</strong> æ³›å‹Generics</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/generics_and_traits/trait.html"><strong aria-hidden="true">4.1.1.8.2.</strong> ç‰¹å¾Traits</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/generics_and_traits/trait_object.html"><strong aria-hidden="true">4.1.1.8.3.</strong> ç‰¹å¾å¯¹è±¡</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/generics_and_traits/advance_trait.html"><strong aria-hidden="true">4.1.1.8.4.</strong> æ·±å…¥ç‰¹å¾</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/collections/pre.html"><strong aria-hidden="true">4.1.1.9.</strong> é›†åˆ</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/collections/vector.html"><strong aria-hidden="true">4.1.1.9.1.</strong> åŠ¨æ€æ•°ç»„</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/collections/hashmap.html"><strong aria-hidden="true">4.1.1.9.2.</strong> hashmap</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/lifetime.html"><strong aria-hidden="true">4.1.1.10.</strong> ç”Ÿå‘½å‘¨æœŸğŸ†˜</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/result_error/pre.html"><strong aria-hidden="true">4.1.1.11.</strong> è¿”å›å€¼ä¸é”™è¯¯å¤„ç†</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/result_error/panic.html"><strong aria-hidden="true">4.1.1.11.1.</strong> panic!æ·±å…¥</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/result_error/result.html"><strong aria-hidden="true">4.1.1.11.2.</strong> è¿”å›å€¼Result</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/crate_module/pre.html"><strong aria-hidden="true">4.1.1.12.</strong> åŒ…å’Œæ¨¡å—</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/crate_module/crate.html"><strong aria-hidden="true">4.1.1.12.1.</strong> åŒ…Crate</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/crate_module/module.html"><strong aria-hidden="true">4.1.1.12.2.</strong> æ¨¡å—Module</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/crate_module/use.html"><strong aria-hidden="true">4.1.1.12.3.</strong> ä½¿ç”¨useåŠå—é™å¯è§æ€§</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/comment.html"><strong aria-hidden="true">4.1.1.13.</strong> æ³¨é‡Šå’Œæ–‡æ¡£</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/converse.html"><strong aria-hidden="true">4.1.1.14.</strong> ç±»å‹è½¬æ¢</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic/formatted_output.html"><strong aria-hidden="true">4.1.1.15.</strong> æ ¼å¼åŒ–è¾“å‡º</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic-practice/intro.html"><strong aria-hidden="true">4.1.2.</strong> å…¥é—¨å®æˆ˜ï¼šæ„å»ºä¸€ä¸ªç®€å•å‘½ä»¤è¡Œç¨‹åº</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/basic-practice/base-features.html"><strong aria-hidden="true">4.1.2.1.</strong> åŸºæœ¬åŠŸèƒ½</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic-practice/refactoring.html"><strong aria-hidden="true">4.1.2.2.</strong> å¢åŠ æ¨¡å—åŒ–å’Œé”™è¯¯å¤„ç†</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic-practice/tests.html"><strong aria-hidden="true">4.1.2.3.</strong> æµ‹è¯•é©±åŠ¨å¼€å‘</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic-practice/envs.html"><strong aria-hidden="true">4.1.2.4.</strong> ä½¿ç”¨ç¯å¢ƒå˜é‡</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/basic-practice/iterators.html"><strong aria-hidden="true">4.1.2.5.</strong> ä½¿ç”¨è¿­ä»£å™¨æ¥æ”¹è¿›ç¨‹åº(å¯é€‰)</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/intro.html"><strong aria-hidden="true">4.1.3.</strong> Rust é«˜çº§è¿›é˜¶</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/lifetime/intro.html"><strong aria-hidden="true">4.1.3.1.</strong> ç”Ÿå‘½å‘¨æœŸ</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/lifetime/advance.html"><strong aria-hidden="true">4.1.3.1.1.</strong> æ·±å…¥ç”Ÿå‘½å‘¨æœŸ</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/lifetime/static.html"><strong aria-hidden="true">4.1.3.1.2.</strong> &'static å’Œ T: 'static</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/functional-programing/intro.html"><strong aria-hidden="true">4.1.3.2.</strong> å‡½æ•°å¼ç¼–ç¨‹: é—­åŒ…ã€è¿­ä»£å™¨</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/functional-programing/closure.html"><strong aria-hidden="true">4.1.3.2.1.</strong> é—­åŒ… Closure</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/functional-programing/iterator.html"><strong aria-hidden="true">4.1.3.2.2.</strong> è¿­ä»£å™¨ Iterator</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/into-types/intro.html"><strong aria-hidden="true">4.1.3.3.</strong> æ·±å…¥ç±»å‹</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/into-types/custom-type.html"><strong aria-hidden="true">4.1.3.3.1.</strong> newtype å’Œ ç±»å‹åˆ«å</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/into-types/sized.html"><strong aria-hidden="true">4.1.3.3.2.</strong> Sized å’Œä¸å®šé•¿ç±»å‹ DST</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/into-types/enum-int.html"><strong aria-hidden="true">4.1.3.3.3.</strong> æšä¸¾å’Œæ•´æ•°</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/smart-pointer/intro.html"><strong aria-hidden="true">4.1.3.4.</strong> æ™ºèƒ½æŒ‡é’ˆ</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/smart-pointer/box.html"><strong aria-hidden="true">4.1.3.4.1.</strong> Boxå †å¯¹è±¡åˆ†é…</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/smart-pointer/deref.html"><strong aria-hidden="true">4.1.3.4.2.</strong> Deref è§£å¼•ç”¨</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/smart-pointer/drop.html"><strong aria-hidden="true">4.1.3.4.3.</strong> Drop é‡Šæ”¾èµ„æº</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/smart-pointer/rc-arc.html"><strong aria-hidden="true">4.1.3.4.4.</strong> Rc ä¸ Arc å®ç° 1vN æ‰€æœ‰æƒæœºåˆ¶</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/smart-pointer/cell-refcell.html"><strong aria-hidden="true">4.1.3.4.5.</strong> Cell ä¸ RefCell å†…éƒ¨å¯å˜æ€§</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/circle-self-ref/intro.html"><strong aria-hidden="true">4.1.3.5.</strong> å¾ªç¯å¼•ç”¨ä¸è‡ªå¼•ç”¨</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/circle-self-ref/circle-reference.html"><strong aria-hidden="true">4.1.3.5.1.</strong> Weak ä¸å¾ªç¯å¼•ç”¨</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/circle-self-ref/self-referential.html"><strong aria-hidden="true">4.1.3.5.2.</strong> ç»“æ„ä½“ä¸­çš„è‡ªå¼•ç”¨</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/concurrency-with-threads/intro.html"><strong aria-hidden="true">4.1.3.6.</strong> å¤šçº¿ç¨‹å¹¶å‘ç¼–ç¨‹</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/concurrency-with-threads/concurrency-parallelism.html"><strong aria-hidden="true">4.1.3.6.1.</strong> å¹¶å‘å’Œå¹¶è¡Œ</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/concurrency-with-threads/thread.html"><strong aria-hidden="true">4.1.3.6.2.</strong> ä½¿ç”¨å¤šçº¿ç¨‹</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/concurrency-with-threads/message-passing.html"><strong aria-hidden="true">4.1.3.6.3.</strong> çº¿ç¨‹åŒæ­¥ï¼šæ¶ˆæ¯ä¼ é€’</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/concurrency-with-threads/sync1.html"><strong aria-hidden="true">4.1.3.6.4.</strong> çº¿ç¨‹åŒæ­¥ï¼šé”ã€Condvar å’Œä¿¡å·é‡</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/concurrency-with-threads/sync2.html"><strong aria-hidden="true">4.1.3.6.5.</strong> çº¿ç¨‹åŒæ­¥ï¼šAtomic åŸå­æ“ä½œä¸å†…å­˜é¡ºåº</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/concurrency-with-threads/send-sync.html"><strong aria-hidden="true">4.1.3.6.6.</strong> åŸºäº Send å’Œ Sync çš„çº¿ç¨‹å®‰å…¨</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/concurrency-with-threads/web-server.html"><strong aria-hidden="true">4.1.3.6.7.</strong> å®è·µåº”ç”¨ï¼šå¤šçº¿ç¨‹ Web æœåŠ¡å™¨ todo</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/global-variable.html"><strong aria-hidden="true">4.1.3.7.</strong> å…¨å±€å˜é‡</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/errors.html"><strong aria-hidden="true">4.1.3.8.</strong> é”™è¯¯å¤„ç†</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/unsafe/intro.html"><strong aria-hidden="true">4.1.3.9.</strong> Unsafe Rust</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/unsafe/superpowers.html"><strong aria-hidden="true">4.1.3.9.1.</strong> äº”ç§å…µå™¨</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/unsafe/inline-asm.html"><strong aria-hidden="true">4.1.3.9.2.</strong> å†…è”æ±‡ç¼– todo</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/advance/macro.html"><strong aria-hidden="true">4.1.3.10.</strong> Macro å®ç¼–ç¨‹</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../rust/rust_holy/async-rust/intro.html"><strong aria-hidden="true">4.1.4.</strong> Rust å¼‚æ­¥ç¼–ç¨‹</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../rust/rust_holy/async-rust/async/intro.html"><strong aria-hidden="true">4.1.4.1.</strong> async/await å¼‚æ­¥ç¼–ç¨‹</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../rust/rust_holy/async-rust/async/getting-started.html" class="active"><strong aria-hidden="true">4.1.4.1.1.</strong> async ç¼–ç¨‹å…¥é—¨</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/async/future-excuting.html"><strong aria-hidden="true">4.1.4.1.2.</strong> åº•å±‚æ¢ç§˜: Future æ‰§è¡Œä¸ä»»åŠ¡è°ƒåº¦</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/async/pin-unpin.html"><strong aria-hidden="true">4.1.4.1.3.</strong> å®šæµ·ç¥é’ˆ Pin å’Œ Unpin</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/async/async-await.html"><strong aria-hidden="true">4.1.4.1.4.</strong> async/await å’Œ Stream æµå¤„ç†</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/async/multi-futures-simultaneous.html"><strong aria-hidden="true">4.1.4.1.5.</strong> åŒæ—¶è¿è¡Œå¤šä¸ª Future</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/async/pain-points-and-workarounds.html"><strong aria-hidden="true">4.1.4.1.6.</strong> ä¸€äº›ç–‘éš¾é—®é¢˜çš„è§£å†³åŠæ³•</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/async/web-server.html"><strong aria-hidden="true">4.1.4.1.7.</strong> å®è·µåº”ç”¨ï¼šAsync Web æœåŠ¡å™¨</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/tokio/intro.html"><strong aria-hidden="true">4.1.4.2.</strong> Tokio ä½¿ç”¨æŒ‡å—</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/tokio/overview.html"><strong aria-hidden="true">4.1.4.2.1.</strong> tokio æ¦‚è§ˆ</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/tokio/getting-startted.html"><strong aria-hidden="true">4.1.4.2.2.</strong> ä½¿ç”¨åˆå°è±¡</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/tokio/spawning.html"><strong aria-hidden="true">4.1.4.2.3.</strong> åˆ›å»ºå¼‚æ­¥ä»»åŠ¡</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/tokio/shared-state.html"><strong aria-hidden="true">4.1.4.2.4.</strong> å…±äº«çŠ¶æ€</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/tokio/channels.html"><strong aria-hidden="true">4.1.4.2.5.</strong> æ¶ˆæ¯ä¼ é€’</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/tokio/io.html"><strong aria-hidden="true">4.1.4.2.6.</strong> I/O</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/tokio/frame.html"><strong aria-hidden="true">4.1.4.2.7.</strong> è§£ææ•°æ®å¸§</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/tokio/async.html"><strong aria-hidden="true">4.1.4.2.8.</strong> æ·±å…¥ async</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/tokio/select.html"><strong aria-hidden="true">4.1.4.2.9.</strong> select</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/tokio/stream.html"><strong aria-hidden="true">4.1.4.2.10.</strong> ç±»ä¼¼è¿­ä»£å™¨çš„ Stream</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/tokio/graceful-shutdown.html"><strong aria-hidden="true">4.1.4.2.11.</strong> ä¼˜é›…çš„å…³é—­</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/async-rust/tokio/bridging-with-sync.html"><strong aria-hidden="true">4.1.4.2.12.</strong> å¼‚æ­¥è·ŸåŒæ­¥å…±å­˜</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/intro.html"><strong aria-hidden="true">4.1.5.</strong> Cargo ä½¿ç”¨æŒ‡å—</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/getting-started.html"><strong aria-hidden="true">4.1.5.1.</strong> ä¸Šæ‰‹ä½¿ç”¨</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/guide/intro.html"><strong aria-hidden="true">4.1.5.2.</strong> åŸºç¡€æŒ‡å—</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/guide/why-exist.html"><strong aria-hidden="true">4.1.5.2.1.</strong> ä¸ºä½•ä¼šæœ‰ Cargo</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/guide/download-package.html"><strong aria-hidden="true">4.1.5.2.2.</strong> ä¸‹è½½å¹¶æ„å»º Package</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/guide/dependencies.html"><strong aria-hidden="true">4.1.5.2.3.</strong> æ·»åŠ ä¾èµ–</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/guide/package-layout.html"><strong aria-hidden="true">4.1.5.2.4.</strong> Package ç›®å½•ç»“æ„</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/guide/cargo-toml-lock.html"><strong aria-hidden="true">4.1.5.2.5.</strong> Cargo.toml vs Cargo.lock</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/guide/tests-ci.html"><strong aria-hidden="true">4.1.5.2.6.</strong> æµ‹è¯•å’Œ CI</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/guide/cargo-cache.html"><strong aria-hidden="true">4.1.5.2.7.</strong> Cargo ç¼“å­˜</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/guide/build-cache.html"><strong aria-hidden="true">4.1.5.2.8.</strong> Build ç¼“å­˜</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/reference/intro.html"><strong aria-hidden="true">4.1.5.3.</strong> è¿›é˜¶æŒ‡å—</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/reference/specify-deps.html"><strong aria-hidden="true">4.1.5.3.1.</strong> æŒ‡å®šä¾èµ–é¡¹</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/reference/deps-overriding.html"><strong aria-hidden="true">4.1.5.3.2.</strong> ä¾èµ–è¦†ç›–</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/reference/manifest.html"><strong aria-hidden="true">4.1.5.3.3.</strong> Cargo.toml æ¸…å•è¯¦è§£</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/reference/cargo-target.html"><strong aria-hidden="true">4.1.5.3.4.</strong> Cargo Target</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/reference/workspaces.html"><strong aria-hidden="true">4.1.5.3.5.</strong> å·¥ä½œç©ºé—´ Workspace</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/reference/features/intro.html"><strong aria-hidden="true">4.1.5.3.6.</strong> æ¡ä»¶ç¼–è¯‘ Features</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/reference/features/examples.html"><strong aria-hidden="true">4.1.5.3.6.1.</strong> Features ç¤ºä¾‹</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/reference/profiles.html"><strong aria-hidden="true">4.1.5.3.7.</strong> å‘å¸ƒé…ç½® Profile</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/reference/configuration.html"><strong aria-hidden="true">4.1.5.3.8.</strong> é€šè¿‡ config.toml å¯¹ Cargo è¿›è¡Œé…ç½®</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/reference/publishing-on-crates.io.html"><strong aria-hidden="true">4.1.5.3.9.</strong> å‘å¸ƒåˆ° crates.io</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/reference/build-script/intro.html"><strong aria-hidden="true">4.1.5.3.10.</strong> æ„å»ºè„šæœ¬ build.rs</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/cargo/reference/build-script/examples.html"><strong aria-hidden="true">4.1.5.3.10.1.</strong> æ„å»ºè„šæœ¬ç¤ºä¾‹</a></li></ol></li></ol></li></ol></li><li class="chapter-item "><a href="../../../../rust/rust_holy/logs/intro.html"><strong aria-hidden="true">4.1.6.</strong> æ—¥å¿—å’Œç›‘æ§</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/logs/about-log.html"><strong aria-hidden="true">4.1.6.1.</strong> æ—¥å¿—è¯¦è§£</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/logs/log.html"><strong aria-hidden="true">4.1.6.2.</strong> æ—¥å¿—é—¨é¢ log</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/logs/tracing.html"><strong aria-hidden="true">4.1.6.3.</strong> ä½¿ç”¨ tracing è®°å½•æ—¥å¿—</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/logs/tracing-logger.html"><strong aria-hidden="true">4.1.6.4.</strong> è‡ªå®šä¹‰ tracing çš„è¾“å‡ºæ ¼å¼</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/logs/observe/intro.html"><strong aria-hidden="true">4.1.6.5.</strong> ç›‘æ§</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/logs/observe/about-observe.html"><strong aria-hidden="true">4.1.6.5.1.</strong> å¯è§‚æµ‹æ€§</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/logs/observe/trace.html"><strong aria-hidden="true">4.1.6.5.2.</strong> åˆ†å¸ƒå¼è¿½è¸ª</a></li></ol></li></ol></li><li class="chapter-item "><div><strong aria-hidden="true">4.1.7.</strong> Appendix</div><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/rust_holy/appendix/keywords.html"><strong aria-hidden="true">4.1.7.1.</strong> å…³é”®å­—</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/appendix/operators.html"><strong aria-hidden="true">4.1.7.2.</strong> è¿ç®—ç¬¦ä¸ç¬¦å·</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/appendix/expressions.html"><strong aria-hidden="true">4.1.7.3.</strong> è¡¨è¾¾å¼</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/appendix/derive.html"><strong aria-hidden="true">4.1.7.4.</strong> æ´¾ç”Ÿç‰¹å¾ trait</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/appendix/prelude.html"><strong aria-hidden="true">4.1.7.5.</strong> prelude æ¨¡å— todo</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/appendix/rust-version.html"><strong aria-hidden="true">4.1.7.6.</strong> Rust ç‰ˆæœ¬è¯´æ˜</a></li><li class="chapter-item "><a href="../../../../rust/rust_holy/appendix/rust-versions/intro.html"><strong aria-hidden="true">4.1.7.7.</strong> Rust å†æ¬¡ç‰ˆæœ¬æ›´æ–°è§£è¯»</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../appendix/rust-versions/1.58.html"><strong aria-hidden="true">4.1.7.7.1.</strong> 1.58</a></li><li class="chapter-item "><a href="../../../../appendix/rust-versions/1.59.html"><strong aria-hidden="true">4.1.7.7.2.</strong> 1.59</a></li><li class="chapter-item "><a href="../../../../appendix/rust-versions/1.60.html"><strong aria-hidden="true">4.1.7.7.3.</strong> 1.60</a></li><li class="chapter-item "><a href="../../../../appendix/rust-versions/1.61.html"><strong aria-hidden="true">4.1.7.7.4.</strong> 1.61</a></li><li class="chapter-item "><a href="../../../../appendix/rust-versions/1.62.html"><strong aria-hidden="true">4.1.7.7.5.</strong> 1.62</a></li><li class="chapter-item "><a href="../../../../appendix/rust-versions/1.63.html"><strong aria-hidden="true">4.1.7.7.6.</strong> 1.63</a></li><li class="chapter-item "><a href="../../../../appendix/rust-versions/1.64.html"><strong aria-hidden="true">4.1.7.7.7.</strong> 1.64</a></li><li class="chapter-item "><a href="../../../../appendix/rust-versions/1.65.html"><strong aria-hidden="true">4.1.7.7.8.</strong> 1.65</a></li><li class="chapter-item "><a href="../../../../appendix/rust-versions/1.66.html"><strong aria-hidden="true">4.1.7.7.9.</strong> 1.66</a></li><li class="chapter-item "><a href="../../../../appendix/rust-versions/1.67.html"><strong aria-hidden="true">4.1.7.7.10.</strong> 1.67</a></li></ol></li></ol></li></ol></li><li class="chapter-item "><a href="../../../../rust/pyo3/pyo3.html"><strong aria-hidden="true">4.2.</strong> PyO3</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/pyo3/pythonmodules.html"><strong aria-hidden="true">4.2.1.</strong> Python æ¨¡ç»„</a></li><li class="chapter-item "><a href="../../../../rust/pyo3/pythonfunctions/pre.html"><strong aria-hidden="true">4.2.2.</strong> Python å‡½æ•°</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../rust/pyo3/pythonfunctions/function_signatures.html"><strong aria-hidden="true">4.2.2.1.</strong> å‡½æ•°ç­¾å Function signatures</a></li><li class="chapter-item "><a href="../../../../rust/pyo3/pythonfunctions/error_handling.html"><strong aria-hidden="true">4.2.2.2.</strong> é”™è¯¯å¤„ç† Error handling</a></li></ol></li><li class="chapter-item "><a href="../../../../rust/pyo3/python_classes/pre.html"><strong aria-hidden="true">4.2.3.</strong> Python ç±»</a></li></ol></li></ol></li><li class="chapter-item "><a href="../../../../others/pre.html"><strong aria-hidden="true">5.</strong> others</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../others/com.html"><strong aria-hidden="true">5.1.</strong> COMç»„ä»¶</a></li><li class="chapter-item "><a href="../../../../others/cython/pre.html"><strong aria-hidden="true">5.2.</strong> cython</a></li></ol></li><li class="chapter-item "><a href="../../../../ml/ml.html"><strong aria-hidden="true">6.</strong> ML</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../ml/pre/pre.html"><strong aria-hidden="true">6.1.</strong> ç»ªè¨€</a></li><li class="chapter-item "><a href="../../../../ml/chapter2/chapter2.html"><strong aria-hidden="true">6.2.</strong> æ¨¡å‹çš„è¯„ä¼°ä¸é€‰æ‹©</a></li><li class="chapter-item "><a href="../../../../ml/chapter3/chapter3.html"><strong aria-hidden="true">6.3.</strong> çº¿æ€§æ¨¡å‹</a></li><li class="chapter-item "><a href="../../../../ml/chapter4/chapter4.html"><strong aria-hidden="true">6.4.</strong> å†³ç­–æ ‘</a></li><li class="chapter-item "><a href="../../../../ml/chapter5/chapter5.html"><strong aria-hidden="true">6.5.</strong> ç¥ç»ç½‘ç»œ</a></li><li class="chapter-item "><a href="../../../../ml/chapter6/chapter6.html"><strong aria-hidden="true">6.6.</strong> æ”¯æŒå‘é‡æœº</a></li><li class="chapter-item "><a href="../../../../ml/chapter7/chapter7.html"><strong aria-hidden="true">6.7.</strong> è´å¶æ–¯åˆ†ç±»å™¨</a></li><li class="chapter-item "><a href="../../../../ml/chapter8/chapter8.html"><strong aria-hidden="true">6.8.</strong> EMç®—æ³•</a></li><li class="chapter-item "><a href="../../../../ml/chapter9/chapter9.html"><strong aria-hidden="true">6.9.</strong> é›†æˆå­¦ä¹ </a></li><li class="chapter-item "><a href="../../../../ml/chapter10/chapter10.html"><strong aria-hidden="true">6.10.</strong> èšç±»ç®—æ³•</a></li><li class="chapter-item "><a href="../../../../ml/chapter11/chapter11.html"><strong aria-hidden="true">6.11.</strong> é™ç»´ä¸åº¦é‡å­¦ä¹ </a></li><li class="chapter-item "><a href="../../../../ml/chapter12/chapter12.html"><strong aria-hidden="true">6.12.</strong> ç‰¹å¾é€‰æ‹©ä¸ç¨€ç–å­¦ä¹ </a></li><li class="chapter-item "><a href="../../../../ml/chapter13/chapter13.html"><strong aria-hidden="true">6.13.</strong> è®¡ç®—å­¦ä¹ ç†è®º</a></li><li class="chapter-item "><a href="../../../../ml/chapter14/chapter14.html"><strong aria-hidden="true">6.14.</strong> åŠç›‘ç£å­¦ä¹ </a></li><li class="chapter-item "><a href="../../../../ml/chapter15/chapter15.html"><strong aria-hidden="true">6.15.</strong> æ¦‚ç‡å›¾æ¨¡å‹</a></li><li class="chapter-item "><a href="../../../../ml/chapter16/chapter16.html"><strong aria-hidden="true">6.16.</strong> å¼ºåŒ–å­¦ä¹ </a></li></ol></li><li class="chapter-item "><a href="../../../../nn/basic.html"><strong aria-hidden="true">7.</strong> NN</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../nn/feedforward.html"><strong aria-hidden="true">7.1.</strong> å‰é¦ˆç¥ç»ç½‘ç»œ</a></li><li class="chapter-item "><a href="../../../../nn/memory.html"><strong aria-hidden="true">7.2.</strong> å¾ªç¯ç¥ç»ç½‘ç»œ</a></li><li class="chapter-item "><a href="../../../../nn/GAN.html"><strong aria-hidden="true">7.3.</strong> ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ</a></li><li class="chapter-item "><a href="../../../../nn/graph.html"><strong aria-hidden="true">7.4.</strong> å›¾ç¥ç»ç½‘ç»œ</a></li></ol></li><li class="chapter-item "><a href="../../../../DRL/DRL.html"><strong aria-hidden="true">8.</strong> DRL</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../DRL/RL.html"><strong aria-hidden="true">8.1.</strong> RL</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../DRL/RL/chapter1/chapter1.html"><strong aria-hidden="true">8.1.1.</strong> æœ‰æ¨¡å‹æ•°å€¼è¿­ä»£</a></li><li class="chapter-item "><a href="../../../../DRL/RL/chapter2/chapter2.html"><strong aria-hidden="true">8.1.2.</strong> å›åˆæ›´æ–°ä»·å€¼è¿­ä»£</a></li><li class="chapter-item "><a href="../../../../DRL/RL/chapter3/chapter3.html"><strong aria-hidden="true">8.1.3.</strong> æ—¶åºå·®åˆ†ä»·å€¼è¿­ä»£</a></li><li class="chapter-item "><a href="../../../../DRL/RL/chapter4/chapter4.html"><strong aria-hidden="true">8.1.4.</strong> å‡½æ•°è¿‘ä¼¼æ–¹æ³•</a></li><li class="chapter-item "><a href="../../../../DRL/RL/chapter5/chapter5.html"><strong aria-hidden="true">8.1.5.</strong> å›åˆæ›´æ–°ç­–ç•¥æ¢¯åº¦æ–¹æ³•</a></li><li class="chapter-item "><a href="../../../../DRL/RL/chapter6/chapter6.html"><strong aria-hidden="true">8.1.6.</strong> æ‰§è¡Œè€…/è¯„è®ºè€…æ–¹æ³•</a></li><li class="chapter-item "><a href="../../../../DRL/RL/chapter7/chapter7.html"><strong aria-hidden="true">8.1.7.</strong> è¿ç»­åŠ¨ä½œç©ºé—´çš„ç¡®å®šæ€§ç­–ç•¥</a></li></ol></li><li class="chapter-item "><a href="../../../../DRL/fin.html"><strong aria-hidden="true">8.2.</strong> FIN</a></li><li class="chapter-item "><a href="../../../../DRL/DRL.html"><strong aria-hidden="true">8.3.</strong> DRL</a></li></ol></li><li class="chapter-item "><a href="../../../../option/option.html"><strong aria-hidden="true">9.</strong> Option</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../option/basic/pre.html"><strong aria-hidden="true">9.1.</strong> æœŸæƒåŸºç¡€æ¦‚å¿µ</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../option/basic/basic.html"><strong aria-hidden="true">9.1.1.</strong> åŸºç¡€çŸ¥è¯†</a></li><li class="chapter-item "><a href="../../../../option/basic/spread.html"><strong aria-hidden="true">9.1.2.</strong> ä»·å·®</a></li><li class="chapter-item "><a href="../../../../option/basic/theorems.html"><strong aria-hidden="true">9.1.3.</strong> æ·±å…¥å¸Œè…Šå€¼</a></li></ol></li><li class="chapter-item "><a href="../../../../option/models/pre.html"><strong aria-hidden="true">9.2.</strong> æœŸæƒæ¨¡å‹</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../option/models/sv.html"><strong aria-hidden="true">9.2.1.</strong> ç»å…¸SV</a></li><li class="chapter-item "><a href="../../../../option/models/rough.html"><strong aria-hidden="true">9.2.2.</strong> RV</a></li><li class="chapter-item "><a href="../../../../option/models/wing_model.html"><strong aria-hidden="true">9.2.3.</strong> wing_model</a></li></ol></li><li class="chapter-item "><a href="../../../../option/automatic_trading/automatic_trading_pre.html"><strong aria-hidden="true">9.3.</strong> Automatic_Trading</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../option/automatic_trading/automatic_hedging/automatic_hedging_pre.html"><strong aria-hidden="true">9.3.1.</strong> Automatic_Hedging</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../../../option/automatic_trading/automatic_hedging/hedging_vanilla.html"><strong aria-hidden="true">9.3.1.1.</strong> hedging_vanilla</a></li></ol></li></ol></li></ol></li></ol>
        </div>
        <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
    </nav>

    <div id="page-wrapper" class="page-wrapper">

        <div class="page">
                        <div id="menu-bar-hover-placeholder"></div>
            <div id="menu-bar" class="menu-bar sticky bordered">
                <div class="left-buttons">
                    <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents"
                        aria-label="Toggle Table of Contents" aria-controls="sidebar">
                        <i class="fa fa-bars"></i>
                    </button>
                    <button id="theme-toggle" class="icon-button" type="button" title="Change theme"
                        aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                        <i class="fa fa-paint-brush"></i>
                    </button>
                    <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                        <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                        <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button>
                        </li>
                    </ul>
                    <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)"
                        aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S"
                        aria-controls="searchbar">
                        <i class="fa fa-search"></i>
                    </button>
                </div>

                <h1 class="menu-title">å¸ƒæ­¦ä¸èˆ</h1>

                <div class="right-buttons">
                    <a href="../../../../print.html" title="Print this book" aria-label="Print this book">
                        <i id="print-button" class="fa fa-print"></i>
                    </a>

                </div>
            </div>

            <div id="search-wrapper" class="hidden">
                <form id="searchbar-outer" class="searchbar-outer">
                    <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..."
                        aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                </form>
                <div id="searchresults-outer" class="searchresults-outer hidden">
                    <div id="searchresults-header" class="searchresults-header"></div>
                    <ul id="searchresults">
                    </ul>
                </div>
            </div>

            <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
            <script type="text/javascript">
                document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');

                // Get viewed page store
                var viewed_key = 'mdbook-viewed';
                var viewed_map = {};
                try {
                    var viewed_storage = localStorage.getItem(viewed_key);
                    if (viewed_storage) {
                        viewed_map = JSON.parse(viewed_storage)
                    }
                } catch (e) { }

                Array.from(document.querySelectorAll('#sidebar a')).forEach(function (link) {
                    link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);

                    // Apply viewed style
                    if (viewed_map[link.pathname]) {
                        link.classList.add('md-viewed')
                    }
                });

                // Mark viewed after 30s
                setTimeout(function () {
                    viewed_map[location.pathname] = 1;
                    localStorage.setItem(viewed_key, JSON.stringify(viewed_map));
                }, 30000)
            </script>

            <div id="content" class="content">
                <!-- Page table of contents -->
                <div class="sidetoc">
                    <nav class="pagetoc"></nav>
                </div>
                <main>
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<h1 id="async-ç¼–ç¨‹ç®€ä»‹"><a class="header" href="#async-ç¼–ç¨‹ç®€ä»‹">Async ç¼–ç¨‹ç®€ä»‹</a></h1>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒRust å¯ä»¥è®©æˆ‘ä»¬å†™å‡ºæ€§èƒ½é«˜ä¸”å®‰å…¨çš„è½¯ä»¶ï¼Œé‚£ä¹ˆå¼‚æ­¥ç¼–ç¨‹è¿™å—å„¿å‘¢ï¼Ÿæ˜¯å¦ä¾ç„¶åœ¨é«˜æ€§èƒ½çš„åŒæ—¶ä¿è¯äº†å®‰å…¨ï¼Ÿ</p>
<p>æˆ‘ä»¬å…ˆé€šè¿‡ä¸€å¼  web æ¡†æ¶æ€§èƒ½å¯¹æ¯”å›¾æ¥æ„Ÿå—ä¸‹ Rust å¼‚æ­¥ç¼–ç¨‹çš„æ€§èƒ½:</p>
<img alt="actix-vs-gin screenshot" width="100%" src="https://pic1.zhimg.com/v2-3cebd732fb56f43713f106fdcfa44a3c_b.png" class="center"  />
<p>ä¸Šå›¾å¹¶ä¸èƒ½è¯´ Rust å†™çš„ <code>actix</code> æ¡†æ¶æ¯” Go çš„ <code>gin</code> æ›´å¥½ã€æ›´ä¼˜ç§€ï¼Œä½†æ˜¯ç¡®å®å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šè¯´æ˜ Rust çš„å¼‚æ­¥æ€§èƒ½éå¸¸çš„é«˜ï¼</p>
<p>ç®€å•æ¥è¯´ï¼Œå¼‚æ­¥ç¼–ç¨‹æ˜¯ä¸€ä¸ªå¹¶å‘ç¼–ç¨‹æ¨¡å‹ï¼Œç›®å‰ä¸»æµè¯­è¨€åŸºæœ¬éƒ½æ”¯æŒäº†ï¼Œå½“ç„¶ï¼Œæ”¯æŒçš„æ–¹å¼æœ‰æ‰€ä¸åŒã€‚å¼‚æ­¥ç¼–ç¨‹å…è®¸æˆ‘ä»¬åŒæ—¶å¹¶å‘è¿è¡Œå¤§é‡çš„ä»»åŠ¡ï¼Œå´ä»…ä»…éœ€è¦å‡ ä¸ªç”šè‡³ä¸€ä¸ª OS çº¿ç¨‹æˆ– CPU æ ¸å¿ƒï¼Œç°ä»£åŒ–çš„å¼‚æ­¥ç¼–ç¨‹åœ¨ä½¿ç”¨ä½“éªŒä¸Šè·ŸåŒæ­¥ç¼–ç¨‹ä¹Ÿå‡ æ— åŒºåˆ«ï¼Œä¾‹å¦‚ Go è¯­è¨€çš„ <code>go</code> å…³é”®å­—ï¼Œä¹ŸåŒ…æ‹¬æˆ‘ä»¬åé¢å°†ä»‹ç»çš„ <code>async/await</code> è¯­æ³•ï¼Œè¯¥è¯­æ³•æ˜¯ <code>JavaScript</code> å’Œ <code>Rust</code> çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ã€‚</p>
<h2 id="async-ç®€ä»‹"><a class="header" href="#async-ç®€ä»‹">async ç®€ä»‹</a></h2>
<p><code>async</code> æ˜¯ Rust é€‰æ‹©çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä»‹ç»ä¸‹å®ƒçš„ä¼˜ç¼ºç‚¹ï¼Œä»¥åŠä½•æ—¶é€‚åˆä½¿ç”¨ã€‚</p>
<h4 id="async-vs-å…¶å®ƒå¹¶å‘æ¨¡å‹"><a class="header" href="#async-vs-å…¶å®ƒå¹¶å‘æ¨¡å‹">async vs å…¶å®ƒå¹¶å‘æ¨¡å‹</a></h4>
<p>ç”±äºå¹¶å‘ç¼–ç¨‹åœ¨ç°ä»£ç¤¾ä¼šéå¸¸é‡è¦ï¼Œå› æ­¤æ¯ä¸ªä¸»æµè¯­è¨€éƒ½å¯¹è‡ªå·±çš„å¹¶å‘æ¨¡å‹è¿›è¡Œè¿‡æƒè¡¡å–èˆå’Œç²¾å¿ƒè®¾è®¡ï¼ŒRust è¯­è¨€ä¹Ÿä¸ä¾‹å¤–ã€‚ä¸‹é¢çš„åˆ—è¡¨å¯ä»¥å¸®åŠ©å¤§å®¶ç†è§£ä¸åŒå¹¶å‘æ¨¡å‹çš„å–èˆ:</p>
<ul>
<li><strong>OS çº¿ç¨‹</strong>, å®ƒæœ€ç®€å•ï¼Œä¹Ÿæ— éœ€æ”¹å˜ä»»ä½•ç¼–ç¨‹æ¨¡å‹(ä¸šåŠ¡/ä»£ç é€»è¾‘)ï¼Œå› æ­¤éå¸¸é€‚åˆä½œä¸ºè¯­è¨€çš„åŸç”Ÿå¹¶å‘æ¨¡å‹ï¼Œæˆ‘ä»¬åœ¨å¤šçº¿ç¨‹ç« èŠ‚ä¹Ÿæåˆ°è¿‡ï¼ŒRust å°±é€‰æ‹©äº†åŸç”Ÿæ”¯æŒçº¿ç¨‹çº§çš„å¹¶å‘ç¼–ç¨‹ã€‚ä½†æ˜¯ï¼Œè¿™ç§æ¨¡å‹ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œä¾‹å¦‚çº¿ç¨‹é—´çš„åŒæ­¥å°†å˜å¾—æ›´åŠ å›°éš¾ï¼Œçº¿ç¨‹é—´çš„ä¸Šä¸‹æ–‡åˆ‡æ¢æŸè€—è¾ƒå¤§ã€‚ä½¿ç”¨çº¿ç¨‹æ± åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥æå‡æ€§èƒ½ï¼Œä½†æ˜¯å¯¹äº IO å¯†é›†çš„åœºæ™¯æ¥è¯´ï¼Œçº¿ç¨‹æ± è¿˜æ˜¯ä¸å¤Ÿã€‚</li>
<li><strong>äº‹ä»¶é©±åŠ¨(Event driven)</strong>, è¿™ä¸ªåè¯ä½ å¯èƒ½æ¯”è¾ƒé™Œç”Ÿï¼Œå¦‚æœè¯´äº‹ä»¶é©±åŠ¨å¸¸å¸¸è·Ÿå›è°ƒ( Callback )ä¸€èµ·ä½¿ç”¨ï¼Œç›¸ä¿¡å¤§å®¶å°±æç„¶å¤§æ‚Ÿäº†ã€‚è¿™ç§æ¨¡å‹æ€§èƒ½ç›¸å½“çš„å¥½ï¼Œä½†æœ€å¤§çš„é—®é¢˜å°±æ˜¯å­˜åœ¨å›è°ƒåœ°ç‹±çš„é£é™©ï¼šéçº¿æ€§çš„æ§åˆ¶æµå’Œç»“æœå¤„ç†å¯¼è‡´äº†æ•°æ®æµå‘å’Œé”™è¯¯ä¼ æ’­å˜å¾—éš¾ä»¥æŒæ§ï¼Œè¿˜ä¼šå¯¼è‡´ä»£ç å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§çš„å¤§å¹…é™ä½ï¼Œå¤§åé¼é¼çš„ <code>JavaScript</code> æ›¾ç»å°±å­˜åœ¨å›è°ƒåœ°ç‹±ã€‚</li>
<li><strong>åç¨‹(Coroutines)</strong> å¯èƒ½æ˜¯ç›®å‰æœ€ç«çš„å¹¶å‘æ¨¡å‹ï¼Œ<code>Go</code> è¯­è¨€çš„åç¨‹è®¾è®¡å°±éå¸¸ä¼˜ç§€ï¼Œè¿™ä¹Ÿæ˜¯ <code>Go</code> è¯­è¨€èƒ½å¤Ÿè¿…é€Ÿç«éå…¨çƒçš„æ€æ‰‹é”ä¹‹ä¸€ã€‚åç¨‹è·Ÿçº¿ç¨‹ç±»ä¼¼ï¼Œæ— éœ€æ”¹å˜ç¼–ç¨‹æ¨¡å‹ï¼ŒåŒæ—¶ï¼Œå®ƒä¹Ÿè·Ÿ <code>async</code> ç±»ä¼¼ï¼Œå¯ä»¥æ”¯æŒå¤§é‡çš„ä»»åŠ¡å¹¶å‘è¿è¡Œã€‚ä½†åç¨‹æŠ½è±¡å±‚æ¬¡è¿‡é«˜ï¼Œå¯¼è‡´ç”¨æˆ·æ— æ³•æ¥è§¦åˆ°åº•å±‚çš„ç»†èŠ‚ï¼Œè¿™å¯¹äºç³»ç»Ÿç¼–ç¨‹è¯­è¨€å’Œè‡ªå®šä¹‰å¼‚æ­¥è¿è¡Œæ—¶æ˜¯éš¾ä»¥æ¥å—çš„</li>
<li><strong>actor æ¨¡å‹</strong>æ˜¯ erlang çš„æ€æ‰‹é”ä¹‹ä¸€ï¼Œå®ƒå°†æ‰€æœ‰å¹¶å‘è®¡ç®—åˆ†å‰²æˆä¸€ä¸ªä¸€ä¸ªå•å…ƒï¼Œè¿™äº›å•å…ƒè¢«ç§°ä¸º <code>actor</code> , å•å…ƒä¹‹é—´é€šè¿‡æ¶ˆæ¯ä¼ é€’çš„æ–¹å¼è¿›è¡Œé€šä¿¡å’Œæ•°æ®ä¼ é€’ï¼Œè·Ÿåˆ†å¸ƒå¼ç³»ç»Ÿçš„è®¾è®¡ç†å¿µéå¸¸ç›¸åƒã€‚ç”±äº <code>actor</code> æ¨¡å‹è·Ÿç°å®å¾ˆè´´è¿‘ï¼Œå› æ­¤å®ƒç›¸å¯¹æ¥è¯´æ›´å®¹æ˜“å®ç°ï¼Œä½†æ˜¯ä¸€æ—¦é‡åˆ°æµæ§åˆ¶ã€å¤±è´¥é‡è¯•ç­‰åœºæ™¯æ—¶ï¼Œå°±ä¼šå˜å¾—ä¸å¤ªå¥½ç”¨</li>
<li><strong>async/await</strong>ï¼Œ è¯¥æ¨¡å‹æ€§èƒ½é«˜ï¼Œè¿˜èƒ½æ”¯æŒåº•å±‚ç¼–ç¨‹ï¼ŒåŒæ—¶åˆåƒçº¿ç¨‹å’Œåç¨‹é‚£æ ·æ— éœ€è¿‡å¤šçš„æ”¹å˜ç¼–ç¨‹æ¨¡å‹ï¼Œä½†æœ‰å¾—å¿…æœ‰å¤±ï¼Œ<code>async</code> æ¨¡å‹çš„é—®é¢˜å°±æ˜¯å†…éƒ¨å®ç°æœºåˆ¶è¿‡äºå¤æ‚ï¼Œå¯¹äºç”¨æˆ·æ¥è¯´ï¼Œç†è§£å’Œä½¿ç”¨èµ·æ¥ä¹Ÿæ²¡æœ‰çº¿ç¨‹å’Œåç¨‹ç®€å•ï¼Œå¥½åœ¨å‰è€…çš„å¤æ‚æ€§å¼€å‘è€…ä»¬å·²ç»å¸®æˆ‘ä»¬å°è£…å¥½ï¼Œè€Œç†è§£å’Œä½¿ç”¨èµ·æ¥ä¸å¤Ÿç®€å•ï¼Œæ­£æ˜¯æœ¬ç« è¯•å›¾è§£å†³çš„é—®é¢˜ã€‚</li>
</ul>
<p>æ€»ä¹‹ï¼ŒRust ç»è¿‡æƒè¡¡å–èˆåï¼Œæœ€ç»ˆé€‰æ‹©äº†åŒæ—¶æä¾›å¤šçº¿ç¨‹ç¼–ç¨‹å’Œ async ç¼–ç¨‹:</p>
<ul>
<li>å‰è€…é€šè¿‡æ ‡å‡†åº“å®ç°ï¼Œå½“ä½ æ— éœ€é‚£ä¹ˆé«˜çš„å¹¶å‘æ—¶ï¼Œä¾‹å¦‚éœ€è¦å¹¶è¡Œè®¡ç®—æ—¶ï¼Œå¯ä»¥é€‰æ‹©å®ƒï¼Œä¼˜ç‚¹æ˜¯çº¿ç¨‹å†…çš„ä»£ç æ‰§è¡Œæ•ˆç‡æ›´é«˜ã€å®ç°æ›´ç›´è§‚æ›´ç®€å•ï¼Œè¿™å—å†…å®¹å·²ç»åœ¨å¤šçº¿ç¨‹ç« èŠ‚è¿›è¡Œè¿‡æ·±å…¥è®²è§£ï¼Œä¸å†èµ˜è¿°</li>
<li>åè€…é€šè¿‡è¯­è¨€ç‰¹æ€§ + æ ‡å‡†åº“ + ä¸‰æ–¹åº“çš„æ–¹å¼å®ç°ï¼Œåœ¨ä½ éœ€è¦é«˜å¹¶å‘ã€å¼‚æ­¥ <code>I/O</code> æ—¶ï¼Œé€‰æ‹©å®ƒå°±å¯¹äº†</li>
</ul>
<h4 id="async-rust-vs-å…¶å®ƒè¯­è¨€"><a class="header" href="#async-rust-vs-å…¶å®ƒè¯­è¨€">async: Rust vs å…¶å®ƒè¯­è¨€</a></h4>
<p>ç›®å‰å·²ç»æœ‰è¯¸å¤šè¯­è¨€éƒ½é€šè¿‡ <code>async</code> çš„æ–¹å¼æä¾›äº†å¼‚æ­¥ç¼–ç¨‹ï¼Œä¾‹å¦‚ <code>JavaScript</code> ï¼Œä½† <code>Rust</code> åœ¨å®ç°ä¸Šæœ‰æ‰€åŒºåˆ«:</p>
<ul>
<li><strong>Future åœ¨ Rust ä¸­æ˜¯æƒ°æ€§çš„</strong>ï¼Œåªæœ‰åœ¨è¢«è½®è¯¢(<code>poll</code>)æ—¶æ‰ä¼šè¿è¡Œï¼Œ å› æ­¤ä¸¢å¼ƒä¸€ä¸ª <code>future</code> ä¼šé˜»æ­¢å®ƒæœªæ¥å†è¢«è¿è¡Œ, ä½ å¯ä»¥å°†<code>Future</code>ç†è§£ä¸ºä¸€ä¸ªåœ¨æœªæ¥æŸä¸ªæ—¶é—´ç‚¹è¢«è°ƒåº¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚</li>
<li><strong>Async åœ¨ Rust ä¸­ä½¿ç”¨å¼€é”€æ˜¯é›¶</strong>ï¼Œ æ„å‘³ç€åªæœ‰ä½ èƒ½çœ‹åˆ°çš„ä»£ç (è‡ªå·±çš„ä»£ç )æ‰æœ‰æ€§èƒ½æŸè€—ï¼Œä½ çœ‹ä¸åˆ°çš„(<code>async</code> å†…éƒ¨å®ç°)éƒ½æ²¡æœ‰æ€§èƒ½æŸè€—ï¼Œä¾‹å¦‚ï¼Œä½ å¯ä»¥æ— éœ€åˆ†é…ä»»ä½•å †å†…å­˜ã€ä¹Ÿæ— éœ€ä»»ä½•åŠ¨æ€åˆ†å‘æ¥ä½¿ç”¨ <code>async</code> ï¼Œè¿™å¯¹äºçƒ­ç‚¹è·¯å¾„çš„æ€§èƒ½æœ‰éå¸¸å¤§çš„å¥½å¤„ï¼Œæ­£æ˜¯å¾—ç›Šäºæ­¤ï¼ŒRust çš„å¼‚æ­¥ç¼–ç¨‹æ€§èƒ½æ‰ä¼šè¿™ä¹ˆé«˜ã€‚</li>
<li><strong>Rust æ²¡æœ‰å†…ç½®å¼‚æ­¥è°ƒç”¨æ‰€å¿…éœ€çš„è¿è¡Œæ—¶</strong>ï¼Œä½†æ˜¯æ— éœ€æ‹…å¿ƒï¼ŒRust ç¤¾åŒºç”Ÿæ€ä¸­å·²ç»æä¾›äº†éå¸¸ä¼˜å¼‚çš„è¿è¡Œæ—¶å®ç°ï¼Œä¾‹å¦‚å¤§æ˜æ˜Ÿ <a href="https://tokio.rs"><code>tokio</code></a></li>
<li><strong>è¿è¡Œæ—¶åŒæ—¶æ”¯æŒå•çº¿ç¨‹å’Œå¤šçº¿ç¨‹</strong>ï¼Œè¿™ä¸¤è€…æ‹¥æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œç¨åä¼šè®²</li>
</ul>
<h4 id="rust-async-vs-å¤šçº¿ç¨‹"><a class="header" href="#rust-async-vs-å¤šçº¿ç¨‹">Rust: async vs å¤šçº¿ç¨‹</a></h4>
<p>è™½ç„¶ <code>async</code> å’Œå¤šçº¿ç¨‹éƒ½å¯ä»¥å®ç°å¹¶å‘ç¼–ç¨‹ï¼Œåè€…ç”šè‡³è¿˜èƒ½é€šè¿‡çº¿ç¨‹æ± æ¥å¢å¼ºå¹¶å‘èƒ½åŠ›ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªæ–¹å¼å¹¶ä¸äº’é€šï¼Œä»ä¸€ä¸ªæ–¹å¼åˆ‡æ¢æˆå¦ä¸€ä¸ªéœ€è¦å¤§é‡çš„ä»£ç é‡æ„å·¥ä½œï¼Œå› æ­¤æå‰ä¸ºè‡ªå·±çš„é¡¹ç›®é€‰æ‹©é€‚åˆçš„å¹¶å‘æ¨¡å‹å°±å˜å¾—è‡³å…³é‡è¦ã€‚</p>
<p><code>OS</code> çº¿ç¨‹éå¸¸é€‚åˆå°‘é‡ä»»åŠ¡å¹¶å‘ï¼Œå› ä¸ºçº¿ç¨‹çš„åˆ›å»ºå’Œä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯éå¸¸æ˜‚è´µçš„ï¼Œç”šè‡³äºç©ºé—²çš„çº¿ç¨‹éƒ½ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºã€‚è™½è¯´çº¿ç¨‹æ± å¯ä»¥æœ‰æ•ˆçš„é™ä½æ€§èƒ½æŸè€—ï¼Œä½†æ˜¯ä¹Ÿæ— æ³•å½»åº•è§£å†³é—®é¢˜ã€‚å½“ç„¶ï¼Œçº¿ç¨‹æ¨¡å‹ä¹Ÿæœ‰å…¶ä¼˜ç‚¹ï¼Œä¾‹å¦‚å®ƒä¸ä¼šç ´åä½ çš„ä»£ç é€»è¾‘å’Œç¼–ç¨‹æ¨¡å‹ï¼Œä½ ä¹‹å‰çš„é¡ºåºä»£ç ï¼Œç»è¿‡å°‘é‡ä¿®æ”¹é€‚é…åä¾ç„¶å¯ä»¥åœ¨æ–°çº¿ç¨‹ä¸­ç›´æ¥è¿è¡Œï¼ŒåŒæ—¶åœ¨æŸäº›æ“ä½œç³»ç»Ÿä¸­ï¼Œä½ è¿˜å¯ä»¥æ”¹å˜çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼Œè¿™å¯¹äºå®ç°é©±åŠ¨ç¨‹åºæˆ–å»¶è¿Ÿæ•æ„Ÿçš„åº”ç”¨(ä¾‹å¦‚ç¡¬å®æ—¶ç³»ç»Ÿ)å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<p>å¯¹äºé•¿æ—¶é—´è¿è¡Œçš„ CPU å¯†é›†å‹ä»»åŠ¡ï¼Œä¾‹å¦‚å¹¶è¡Œè®¡ç®—ï¼Œä½¿ç”¨çº¿ç¨‹å°†æ›´æœ‰ä¼˜åŠ¿ã€‚ è¿™ç§å¯†é›†ä»»åŠ¡å¾€å¾€ä¼šè®©æ‰€åœ¨çš„çº¿ç¨‹æŒç»­è¿è¡Œï¼Œä»»ä½•ä¸å¿…è¦çš„çº¿ç¨‹åˆ‡æ¢éƒ½ä¼šå¸¦æ¥æ€§èƒ½æŸè€—ï¼Œå› æ­¤é«˜å¹¶å‘åè€Œåœ¨æ­¤æ—¶æˆä¸ºäº†ä¸€ç§å¤šä½™ã€‚åŒæ—¶ä½ æ‰€åˆ›å»ºçš„çº¿ç¨‹æ•°åº”è¯¥ç­‰äº CPU æ ¸å¿ƒæ•°ï¼Œå……åˆ†åˆ©ç”¨ CPU çš„å¹¶è¡Œèƒ½åŠ›ï¼Œç”šè‡³è¿˜å¯ä»¥å°†çº¿ç¨‹ç»‘å®šåˆ° CPU æ ¸å¿ƒä¸Šï¼Œè¿›ä¸€æ­¥å‡å°‘çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p>
<p>è€Œé«˜å¹¶å‘æ›´é€‚åˆ <code>IO</code> å¯†é›†å‹ä»»åŠ¡ï¼Œä¾‹å¦‚ web æœåŠ¡å™¨ã€æ•°æ®åº“è¿æ¥ç­‰ç­‰ç½‘ç»œæœåŠ¡ï¼Œå› ä¸ºè¿™äº›ä»»åŠ¡ç»å¤§éƒ¨åˆ†æ—¶é—´éƒ½å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå¦‚æœä½¿ç”¨å¤šçº¿ç¨‹ï¼Œé‚£çº¿ç¨‹å¤§é‡æ—¶é—´ä¼šå¤„äºæ— æ‰€äº‹äº‹çš„çŠ¶æ€ï¼Œå†åŠ ä¸Šçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„é«˜æ˜‚ä»£ä»·ï¼Œè®©å¤šçº¿ç¨‹åš <code>IO</code> å¯†é›†ä»»åŠ¡å˜æˆäº†ä¸€ä»¶éå¸¸å¥¢ä¾ˆçš„äº‹ã€‚è€Œä½¿ç”¨<code>async</code>ï¼Œæ—¢å¯ä»¥æœ‰æ•ˆçš„é™ä½ <code>CPU</code> å’Œå†…å­˜çš„è´Ÿæ‹…ï¼Œåˆå¯ä»¥è®©å¤§é‡çš„ä»»åŠ¡å¹¶å‘çš„è¿è¡Œï¼Œä¸€ä¸ªä»»åŠ¡ä¸€æ—¦å¤„äº<code>IO</code>æˆ–è€…å…¶ä»–ç­‰å¾…(é˜»å¡)çŠ¶æ€ï¼Œå°±ä¼šè¢«ç«‹åˆ»åˆ‡èµ°å¹¶æ‰§è¡Œå¦ä¸€ä¸ªä»»åŠ¡ï¼Œè€Œè¿™é‡Œçš„ä»»åŠ¡åˆ‡æ¢çš„æ€§èƒ½å¼€é”€è¦è¿œè¿œä½äºä½¿ç”¨å¤šçº¿ç¨‹æ—¶çš„çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p>
<p>äº‹å®ä¸Š, <code>async</code> åº•å±‚ä¹Ÿæ˜¯åŸºäºçº¿ç¨‹å®ç°ï¼Œä½†æ˜¯å®ƒåŸºäºçº¿ç¨‹å°è£…äº†ä¸€ä¸ªè¿è¡Œæ—¶ï¼Œå¯ä»¥å°†å¤šä¸ªä»»åŠ¡æ˜ å°„åˆ°å°‘é‡çº¿ç¨‹ä¸Šï¼Œç„¶åå°†çº¿ç¨‹åˆ‡æ¢å˜æˆäº†ä»»åŠ¡åˆ‡æ¢ï¼Œåè€…ä»…ä»…æ˜¯å†…å­˜ä¸­çš„è®¿é—®ï¼Œå› æ­¤è¦é«˜æ•ˆçš„å¤šã€‚</p>
<p>ä¸è¿‡<code>async</code>ä¹Ÿæœ‰å…¶ç¼ºç‚¹ï¼ŒåŸå› æ˜¯ç¼–è¯‘å™¨ä¼šä¸º<code>async</code>å‡½æ•°ç”ŸæˆçŠ¶æ€æœºï¼Œç„¶åå°†æ•´ä¸ªè¿è¡Œæ—¶æ‰“åŒ…è¿›æ¥ï¼Œè¿™ä¼šé€ æˆæˆ‘ä»¬ç¼–è¯‘å‡ºçš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ä½“ç§¯æ˜¾è‘—å¢å¤§ã€‚</p>
<p>æ€»ä¹‹ï¼Œ<code>async</code>ç¼–ç¨‹å¹¶æ²¡æœ‰æ¯”å¤šçº¿ç¨‹æ›´å¥½ï¼Œæœ€ç»ˆè¿˜æ˜¯æ ¹æ®ä½ çš„ä½¿ç”¨åœºæ™¯ä½œå‡ºåˆé€‚çš„é€‰æ‹©ï¼Œå¦‚æœæ— éœ€é«˜å¹¶å‘ï¼Œæˆ–è€…ä¹Ÿä¸åœ¨æ„çº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„æ€§èƒ½æŸè€—ï¼Œé‚£ä¹ˆå¤šçº¿ç¨‹ä½¿ç”¨èµ·æ¥ä¼šç®€å•ã€æ–¹ä¾¿çš„å¤šï¼æœ€åå†ç®€å•æ€»ç»“ä¸‹ï¼š</p>
<blockquote>
<p>è‹¥å¤§å®¶ä½¿ç”¨ tokioï¼Œé‚£ CPU å¯†é›†çš„ä»»åŠ¡å°¤å…¶éœ€è¦ç”¨çº¿ç¨‹çš„æ–¹å¼å»å¤„ç†ï¼Œä¾‹å¦‚ä½¿ç”¨ <code>spawn_blocking</code> åˆ›å»ºä¸€ä¸ªé˜»å¡çš„çº¿ç¨‹å»å®Œæˆç›¸åº” CPU å¯†é›†ä»»åŠ¡ã€‚</p>
<p>è‡³äºå…·ä½“çš„åŸå› ï¼Œä¸ä»…æ˜¯ä¸Šæ–‡è¯´åˆ°çš„é‚£äº›ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯ï¼štokio æ˜¯åä½œå¼åœ°è°ƒåº¦å™¨ï¼Œå¦‚æœæŸä¸ª CPU å¯†é›†çš„å¼‚æ­¥ä»»åŠ¡æ˜¯é€šè¿‡ tokio åˆ›å»ºçš„ï¼Œé‚£ç†è®ºä¸Šæ¥è¯´ï¼Œè¯¥å¼‚æ­¥ä»»åŠ¡éœ€è¦è·Ÿå…¶å®ƒçš„å¼‚æ­¥ä»»åŠ¡äº¤é”™æ‰§è¡Œï¼Œæœ€ç»ˆå¤§å®¶éƒ½å¾—åˆ°äº†æ‰§è¡Œï¼Œçš†å¤§æ¬¢å–œã€‚ä½†å®é™…æƒ…å†µæ˜¯ï¼ŒCPU å¯†é›†çš„ä»»åŠ¡å¾ˆå¯èƒ½ä¼šä¸€ç›´éœ¸å ç€ CPUï¼Œæ­¤æ—¶ tokio çš„è°ƒåº¦æ–¹å¼å†³å®šäº†è¯¥ä»»åŠ¡ä¼šä¸€ç›´è¢«æ‰§è¡Œï¼Œè¿™æ„å‘³ç€ï¼Œå…¶å®ƒçš„å¼‚æ­¥ä»»åŠ¡æ— æ³•å¾—åˆ°æ‰§è¡Œçš„æœºä¼šï¼Œæœ€ç»ˆè¿™äº›ä»»åŠ¡éƒ½ä¼šå› ä¸ºå¾—ä¸åˆ°èµ„æºè€Œé¥¿æ­»ã€‚</p>
<p>è€Œä½¿ç”¨ <code>spawn_blocking</code> åï¼Œä¼šåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ OS çº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹å¹¶ä¸ä¼šè¢« tokio æ‰€è°ƒåº¦( è¢« OS æ‰€è°ƒåº¦ )ï¼Œå› æ­¤å®ƒæ‰€æ‰§è¡Œçš„ CPU å¯†é›†ä»»åŠ¡ä¹Ÿä¸ä¼šå¯¼è‡´ tokio è°ƒåº¦çš„é‚£äº›å¼‚æ­¥ä»»åŠ¡è¢«é¥¿æ­»</p>
</blockquote>
<ul>
<li>æœ‰å¤§é‡ <code>IO</code> ä»»åŠ¡éœ€è¦å¹¶å‘è¿è¡Œæ—¶ï¼Œé€‰ <code>async</code> æ¨¡å‹</li>
<li>æœ‰éƒ¨åˆ† <code>IO</code> ä»»åŠ¡éœ€è¦å¹¶å‘è¿è¡Œæ—¶ï¼Œé€‰å¤šçº¿ç¨‹ï¼Œå¦‚æœæƒ³è¦é™ä½çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯çš„å¼€é”€ï¼Œå¯ä»¥ä½¿ç”¨çº¿ç¨‹æ± </li>
<li>æœ‰å¤§é‡ <code>CPU</code> å¯†é›†ä»»åŠ¡éœ€è¦å¹¶è¡Œè¿è¡Œæ—¶ï¼Œä¾‹å¦‚å¹¶è¡Œè®¡ç®—ï¼Œé€‰å¤šçº¿ç¨‹æ¨¡å‹ï¼Œä¸”è®©çº¿ç¨‹æ•°ç­‰äºæˆ–è€…ç¨å¤§äº <code>CPU</code> æ ¸å¿ƒæ•°</li>
<li>æ— æ‰€è°“æ—¶ï¼Œç»Ÿä¸€é€‰å¤šçº¿ç¨‹</li>
</ul>
<h4 id="async-å’Œå¤šçº¿ç¨‹çš„æ€§èƒ½å¯¹æ¯”"><a class="header" href="#async-å’Œå¤šçº¿ç¨‹çš„æ€§èƒ½å¯¹æ¯”">async å’Œå¤šçº¿ç¨‹çš„æ€§èƒ½å¯¹æ¯”</a></h4>
<div class="table-wrapper"><table><thead><tr><th>æ“ä½œ</th><th>async</th><th>çº¿ç¨‹</th></tr></thead><tbody>
<tr><td>åˆ›å»º</td><td>0.3 å¾®ç§’</td><td>17 å¾®ç§’</td></tr>
<tr><td>çº¿ç¨‹åˆ‡æ¢</td><td>0.2 å¾®ç§’</td><td>1.7 å¾®ç§’</td></tr>
</tbody></table>
</div>
<p>å¯ä»¥çœ‹å‡ºï¼Œ<code>async</code> åœ¨çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€æ˜¾è‘—ä½äºå¤šçº¿ç¨‹ï¼Œå¯¹äº IO å¯†é›†çš„åœºæ™¯ï¼Œè¿™ç§æ€§èƒ½å¼€é”€ç´¯è®¡ä¸‹æ¥ä¼šéå¸¸å¯æ€•ï¼</p>
<h4 id="ä¸€ä¸ªä¾‹å­"><a class="header" href="#ä¸€ä¸ªä¾‹å­">ä¸€ä¸ªä¾‹å­</a></h4>
<p>åœ¨å¤§æ¦‚ç†è§£<code>async</code>åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚å¦‚æœæƒ³å¹¶å‘çš„ä¸‹è½½æ–‡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨å¤šçº¿ç¨‹å¦‚ä¸‹å®ç°:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn get_two_sites() {
    // åˆ›å»ºä¸¤ä¸ªæ–°çº¿ç¨‹æ‰§è¡Œä»»åŠ¡
    let thread_one = thread::spawn(|| download(&quot;https://course.rs&quot;));
    let thread_two = thread::spawn(|| download(&quot;https://fancy.rs&quot;));

    // ç­‰å¾…ä¸¤ä¸ªçº¿ç¨‹çš„å®Œæˆ
    thread_one.join().expect(&quot;thread one panicked&quot;);
    thread_two.join().expect(&quot;thread two panicked&quot;);
}
<span class="boring">}</span></code></pre></pre>
<p>å¦‚æœæ˜¯åœ¨ä¸€ä¸ªå°é¡¹ç›®ä¸­ç®€å•çš„å»ä¸‹è½½æ–‡ä»¶ï¼Œè¿™ä¹ˆå†™æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯ä¸€æ—¦ä¸‹è½½æ–‡ä»¶çš„å¹¶å‘è¯·æ±‚å¤šèµ·æ¥ï¼Œé‚£ä¸€ä¸ªä¸‹è½½ä»»åŠ¡å ç”¨ä¸€ä¸ªçº¿ç¨‹çš„æ¨¡å¼å°±å¤ªé‡äº†ï¼Œä¼šå¾ˆå®¹æ˜“æˆä¸ºç¨‹åºçš„ç“¶é¢ˆã€‚å¥½åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>async</code>çš„æ–¹å¼æ¥è§£å†³ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn get_two_sites_async() {
    // åˆ›å»ºä¸¤ä¸ªä¸åŒçš„`future`ï¼Œä½ å¯ä»¥æŠŠ`future`ç†è§£ä¸ºæœªæ¥æŸä¸ªæ—¶åˆ»ä¼šè¢«æ‰§è¡Œçš„è®¡åˆ’ä»»åŠ¡
    // å½“ä¸¤ä¸ª`future`è¢«åŒæ—¶æ‰§è¡Œåï¼Œå®ƒä»¬å°†å¹¶å‘çš„å»ä¸‹è½½ç›®æ ‡é¡µé¢
    let future_one = download_async(&quot;https://www.foo.com&quot;);
    let future_two = download_async(&quot;https://www.bar.com&quot;);

    // åŒæ—¶è¿è¡Œä¸¤ä¸ª`future`ï¼Œç›´è‡³å®Œæˆ
    join!(future_one, future_two);
}
<span class="boring">}</span></code></pre></pre>
<p>æ­¤æ—¶ï¼Œä¸å†æœ‰çº¿ç¨‹åˆ›å»ºå’Œåˆ‡æ¢çš„æ˜‚è´µå¼€é”€ï¼Œæ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯é€šè¿‡é™æ€çš„æ–¹å¼è¿›è¡Œåˆ†å‘ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰ä»»ä½•å†…å­˜åˆ†é…å‘ç”Ÿã€‚è¿™æ®µä»£ç çš„æ€§èƒ½ç®€ç›´æ— æ‡ˆå¯å‡»ï¼</p>
<p>äº‹å®ä¸Šï¼Œ<code>async</code> å’Œå¤šçº¿ç¨‹å¹¶ä¸æ˜¯äºŒé€‰ä¸€ï¼Œåœ¨åŒä¸€åº”ç”¨ä¸­ï¼Œå¯ä»¥æ ¹æ®æƒ…å†µä¸¤è€…ä¸€èµ·ä½¿ç”¨ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å…¶å®ƒçš„å¹¶å‘æ¨¡å‹ï¼Œä¾‹å¦‚ä¸Šé¢æåˆ°äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œå‰ææ˜¯æœ‰ä¸‰æ–¹åº“æä¾›äº†ç›¸åº”çš„å®ç°ã€‚</p>
<h2 id="async-rust-å½“å‰çš„è¿›å±•"><a class="header" href="#async-rust-å½“å‰çš„è¿›å±•">Async Rust å½“å‰çš„è¿›å±•</a></h2>
<p>ç®€è€Œè¨€ä¹‹ï¼ŒRust è¯­è¨€çš„ <code>async</code> ç›®å‰è¿˜æ²¡æœ‰è¾¾åˆ°å¤šçº¿ç¨‹çš„æˆç†Ÿåº¦ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†å†…å®¹è¿˜åœ¨ä¸æ–­è¿›åŒ–ä¸­ï¼Œå½“ç„¶ï¼Œè¿™å¹¶ä¸å½±å“æˆ‘ä»¬åœ¨ç”Ÿäº§çº§é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œå› ä¸ºç¤¾åŒºä¸­è¿˜æœ‰ <code>tokio</code> è¿™ç§å¤§æ€å™¨ã€‚</p>
<p>ä½¿ç”¨ <code>async</code> æ—¶ï¼Œä½ ä¼šé‡åˆ°å¥½çš„ï¼Œä¹Ÿä¼šé‡åˆ°ä¸å¥½çš„ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ”¶è·å“è¶Šçš„æ€§èƒ½</li>
<li>ä¼šç»å¸¸è·Ÿè¿›é˜¶è¯­è¨€ç‰¹æ€§æ‰“äº¤é“ï¼Œä¾‹å¦‚ç”Ÿå‘½å‘¨æœŸç­‰ï¼Œè¿™äº›å®¶ä¼™å¯ä¸å¥½å¯¹ä»˜</li>
<li>ä¸€äº›å…¼å®¹æ€§é—®é¢˜ï¼Œä¾‹å¦‚åŒæ­¥å’Œå¼‚æ­¥ä»£ç ã€ä¸åŒçš„å¼‚æ­¥è¿è¡Œæ—¶( <code>tokio</code> ä¸ <code>async-std</code> )</li>
<li>æ›´æ˜‚è´µçš„ç»´æŠ¤æˆæœ¬ï¼ŒåŸå› æ˜¯ <code>async</code> å’Œç¤¾åŒºå¼€å‘çš„è¿è¡Œæ—¶ä¾ç„¶åœ¨ä¸åœçš„è¿›åŒ–</li>
</ul>
<p>æ€»ä¹‹ï¼Œ<code>async</code> åœ¨ Rust ä¸­å¹¶ä¸æ˜¯ä¸€ä¸ªå–„èŒ¬ï¼Œä½ ä¼šé‡åˆ°æ›´å¤šçš„å›°éš¾æˆ–è€…è¯´å‘ï¼Œä¹Ÿä¼šå¸¦æ¥æ›´é«˜çš„ä»£ç é˜…è¯»æˆæœ¬åŠç»´æŠ¤æˆæœ¬ï¼Œä½†æ˜¯ä¸ºäº†æ€§èƒ½ï¼Œä¸€åˆ‡éƒ½å€¼äº†ï¼Œä¸æ˜¯å—ï¼Ÿ</p>
<p>ä¸è¿‡å¥½åœ¨ï¼Œè¿™äº›è¿›åŒ–æ—©æ™šä¼šå½»åº•ç¨³å®šæˆç†Ÿï¼Œè€Œä¸”åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šä½¿ç”¨æˆç†Ÿçš„ä¸‰æ–¹åº“ï¼Œä¾‹å¦‚<code>tokio</code>ï¼Œå› æ­¤å¯ä»¥é¿å…ä¸€äº›ç±»ä¼¼çš„é—®é¢˜ï¼Œä½†æ˜¯å¯¹äºæœ¬ç« çš„å­¦ä¹ æ¥è¯´ï¼Œ<code>async</code> çš„ä¸€äº›éš¾ç‚¹è¿˜æ˜¯æˆ‘ä»¬å¿…é¡»è¦å»é¢å¯¹å’Œå¾æœçš„ã€‚</p>
<h4 id="è¯­è¨€å’Œåº“çš„æ”¯æŒ"><a class="header" href="#è¯­è¨€å’Œåº“çš„æ”¯æŒ">è¯­è¨€å’Œåº“çš„æ”¯æŒ</a></h4>
<p><code>async</code> çš„åº•å±‚å®ç°éå¸¸å¤æ‚ï¼Œä¸”ä¼šå¯¼è‡´ç¼–è¯‘åæ–‡ä»¶ä½“ç§¯æ˜¾è‘—å¢åŠ ï¼Œå› æ­¤ Rust æ²¡æœ‰é€‰æ‹©åƒ Go è¯­è¨€é‚£æ ·å†…ç½®äº†å®Œæ•´çš„ç‰¹æ€§å’Œè¿è¡Œæ—¶ï¼Œè€Œæ˜¯é€‰æ‹©äº†é€šè¿‡ Rust è¯­è¨€æä¾›äº†å¿…è¦çš„ç‰¹æ€§æ”¯æŒï¼Œå†é€šè¿‡ç¤¾åŒºæ¥æä¾› <code>async</code> è¿è¡Œæ—¶çš„æ”¯æŒã€‚ å› æ­¤è¦å®Œæ•´çš„ä½¿ç”¨ <code>async</code> å¼‚æ­¥ç¼–ç¨‹ï¼Œä½ éœ€è¦ä¾èµ–ä»¥ä¸‹ç‰¹æ€§å’Œå¤–éƒ¨åº“:</p>
<ul>
<li>æ‰€å¿…é¡»çš„ç‰¹å¾(ä¾‹å¦‚ <code>Future</code> )ã€ç±»å‹å’Œå‡½æ•°ï¼Œç”±æ ‡å‡†åº“æä¾›å®ç°</li>
<li>å…³é”®å­— <code>async/await</code> ç”± Rust è¯­è¨€æä¾›ï¼Œå¹¶è¿›è¡Œäº†ç¼–è¯‘å™¨å±‚é¢çš„æ”¯æŒ</li>
<li>ä¼—å¤šå®ç”¨çš„ç±»å‹ã€å®å’Œå‡½æ•°ç”±å®˜æ–¹å¼€å‘çš„ <a href="https://github.com/rust-lang/futures-rs"><code>futures</code></a> åŒ…æä¾›(ä¸æ˜¯æ ‡å‡†åº“)ï¼Œå®ƒä»¬å¯ä»¥ç”¨äºä»»ä½• <code>async</code> åº”ç”¨ä¸­ã€‚</li>
<li><code>async</code> ä»£ç çš„æ‰§è¡Œã€<code>IO</code> æ“ä½œã€ä»»åŠ¡åˆ›å»ºå’Œè°ƒåº¦ç­‰ç­‰å¤æ‚åŠŸèƒ½ç”±ç¤¾åŒºçš„ <code>async</code> è¿è¡Œæ—¶æä¾›ï¼Œä¾‹å¦‚ <a href="https://github.com/tokio-rs/tokio"><code>tokio</code></a> å’Œ <a href="https://github.com/async-rs/async-std"><code>async-std</code></a></li>
</ul>
<p>è¿˜æœ‰ï¼Œä½ åœ¨åŒæ­¥( <code>synchronous</code> )ä»£ç ä¸­ä½¿ç”¨çš„ä¸€äº›è¯­è¨€ç‰¹æ€§åœ¨ <code>async</code> ä¸­å¯èƒ½å°†æ— æ³•å†ä½¿ç”¨ï¼Œè€Œä¸” Rust ä¹Ÿä¸å…è®¸ä½ åœ¨ç‰¹å¾ä¸­å£°æ˜ <code>async</code> å‡½æ•°(å¯ä»¥é€šè¿‡ä¸‰æ–¹åº“å®ç°)ï¼Œ æ€»ä¹‹ï¼Œä½ ä¼šé‡åˆ°ä¸€äº›åœ¨åŒæ­¥ä»£ç ä¸­ä¸ä¼šé‡åˆ°çš„å¥‡å¥‡æ€ªæ€ªã€å½¢å½¢è‰²è‰²çš„é—®é¢˜ï¼Œä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œæœ¬ç« ä¼šä¸“é—¨ç”¨ä¸€ä¸ªç« èŠ‚ç½—åˆ—è¿™äº›é—®é¢˜ï¼Œå¹¶ç»™å‡ºç›¸åº”çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h4 id="ç¼–è¯‘å’Œé”™è¯¯"><a class="header" href="#ç¼–è¯‘å’Œé”™è¯¯">ç¼–è¯‘å’Œé”™è¯¯</a></h4>
<p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>async</code> ä¸­çš„ç¼–è¯‘é”™è¯¯å’Œè¿è¡Œæ—¶é”™è¯¯è·Ÿä¹‹å‰æ²¡å•¥åŒºåˆ«ï¼Œä½†æ˜¯ä¾ç„¶æœ‰ä»¥ä¸‹å‡ ç‚¹å€¼å¾—æ³¨æ„ï¼š</p>
<ul>
<li>ç¼–è¯‘é”™è¯¯ï¼Œç”±äº <code>async</code> ç¼–ç¨‹æ—¶éœ€è¦ç»å¸¸ä½¿ç”¨å¤æ‚çš„è¯­è¨€ç‰¹æ€§ï¼Œä¾‹å¦‚ç”Ÿå‘½å‘¨æœŸå’Œ<code>Pin</code>ï¼Œå› æ­¤ç›¸å…³çš„é”™è¯¯å¯èƒ½ä¼šå‡ºç°çš„æ›´åŠ é¢‘ç¹</li>
<li>è¿è¡Œæ—¶é”™è¯¯ï¼Œç¼–è¯‘å™¨ä¼šä¸ºæ¯ä¸€ä¸ª<code>async</code>å‡½æ•°ç”ŸæˆçŠ¶æ€æœºï¼Œè¿™ä¼šå¯¼è‡´åœ¨æ ˆè·Ÿè¸ªæ—¶ä¼šåŒ…å«è¿™äº›çŠ¶æ€æœºçš„ç»†èŠ‚ï¼ŒåŒæ—¶è¿˜åŒ…å«äº†è¿è¡Œæ—¶å¯¹å‡½æ•°çš„è°ƒç”¨ï¼Œå› æ­¤ï¼Œæ ˆè·Ÿè¸ªè®°å½•(ä¾‹å¦‚ <code>panic</code> æ—¶)å°†å˜å¾—æ›´åŠ éš¾ä»¥è§£è¯»</li>
<li>ä¸€äº›éšè”½çš„é”™è¯¯ä¹Ÿå¯èƒ½å‘ç”Ÿï¼Œä¾‹å¦‚åœ¨ä¸€ä¸ª <code>async</code> ä¸Šä¸‹æ–‡ä¸­å»è°ƒç”¨ä¸€ä¸ªé˜»å¡çš„å‡½æ•°ï¼Œæˆ–è€…æ²¡æœ‰æ­£ç¡®çš„å®ç° <code>Future</code> ç‰¹å¾éƒ½æœ‰å¯èƒ½å¯¼è‡´è¿™ç§é”™è¯¯ã€‚è¿™ç§é”™è¯¯å¯èƒ½ä¼šæ‚„æ— å£°æ¯çš„é€šè¿‡ç¼–è¯‘æ£€æŸ¥ç”šè‡³æœ‰æ—¶å€™ä¼šé€šè¿‡å•å…ƒæµ‹è¯•ã€‚å¥½åœ¨ä¸€æ—¦ä½ æ·±å…¥å­¦ä¹ å¹¶æŒæ¡äº†æœ¬ç« çš„å†…å®¹å’Œ <code>async</code> åŸç†ï¼Œå¯ä»¥æœ‰æ•ˆçš„é™ä½é‡åˆ°è¿™äº›é”™è¯¯çš„æ¦‚ç‡</li>
</ul>
<h4 id="å…¼å®¹æ€§è€ƒè™‘"><a class="header" href="#å…¼å®¹æ€§è€ƒè™‘">å…¼å®¹æ€§è€ƒè™‘</a></h4>
<p>å¼‚æ­¥ä»£ç å’ŒåŒæ­¥ä»£ç å¹¶ä¸æ€»èƒ½å’Œç¦å…±å¤„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ— æ³•åœ¨ä¸€ä¸ªåŒæ­¥å‡½æ•°ä¸­å»è°ƒç”¨ä¸€ä¸ª <code>async</code> å¼‚æ­¥å‡½æ•°ï¼ŒåŒæ­¥å’Œå¼‚æ­¥ä»£ç ä¹Ÿå¾€å¾€ä½¿ç”¨ä¸åŒçš„è®¾è®¡æ¨¡å¼ï¼Œè¿™äº›éƒ½ä¼šå¯¼è‡´ä¸¤è€…èåˆä¸Šçš„å›°éš¾ã€‚</p>
<p>ç”šè‡³äºæœ‰æ—¶å€™ï¼Œå¼‚æ­¥ä»£ç ä¹‹é—´ä¹Ÿå­˜åœ¨ç±»ä¼¼çš„é—®é¢˜ï¼Œå¦‚æœä¸€ä¸ªåº“ä¾èµ–äºç‰¹å®šçš„ <code>async</code> è¿è¡Œæ—¶æ¥è¿è¡Œï¼Œé‚£ä¹ˆè¿™ä¸ªåº“éå¸¸æœ‰å¿…è¦å‘Šè¯‰å®ƒçš„ç”¨æˆ·ï¼Œå®ƒç”¨äº†è¿™ä¸ªè¿è¡Œæ—¶ã€‚å¦åˆ™ä¸€æ—¦ç”¨æˆ·é€‰äº†ä¸åŒçš„æˆ–ä¸å…¼å®¹çš„è¿è¡Œæ—¶ï¼Œå°±ä¼šå¯¼è‡´ä¸å¯é¢„çŸ¥çš„éº»çƒ¦ã€‚</p>
<h4 id="æ€§èƒ½ç‰¹æ€§"><a class="header" href="#æ€§èƒ½ç‰¹æ€§">æ€§èƒ½ç‰¹æ€§</a></h4>
<p><code>async</code> ä»£ç çš„æ€§èƒ½ä¸»è¦å–å†³äºä½ ä½¿ç”¨çš„ <code>async</code> è¿è¡Œæ—¶ï¼Œå¥½åœ¨è¿™äº›è¿è¡Œæ—¶éƒ½ç»è¿‡äº†ç²¾å¿ƒçš„è®¾è®¡ï¼Œåœ¨ä½ èƒ½é‡åˆ°çš„ç»å¤§å¤šæ•°åœºæ™¯ä¸­ï¼Œå®ƒä»¬éƒ½èƒ½æ‹¥æœ‰éå¸¸æ£’çš„æ€§èƒ½è¡¨ç°ã€‚</p>
<p>ä½†æ˜¯ä¸–äº‹çš†æœ‰ä¾‹å¤–ã€‚ç›®å‰ä¸»æµçš„ <code>async</code> è¿è¡Œæ—¶å‡ ä¹éƒ½ä½¿ç”¨äº†å¤šçº¿ç¨‹å®ç°ï¼Œç›¸æ¯”å•çº¿ç¨‹è™½ç„¶å¢åŠ äº†å¹¶å‘è¡¨ç°ï¼Œä½†æ˜¯å¯¹äºæ‰§è¡Œæ€§èƒ½ä¼šæœ‰æ‰€æŸå¤±ï¼Œå› ä¸ºå¤šçº¿ç¨‹å®ç°ä¼šæœ‰åŒæ­¥å’Œåˆ‡æ¢ä¸Šçš„æ€§èƒ½å¼€é”€ï¼Œè‹¥ä½ éœ€è¦æè‡´çš„é¡ºåºæ‰§è¡Œæ€§èƒ½ï¼Œé‚£ä¹ˆ <code>async</code> ç›®å‰å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚</p>
<p>åŒæ ·çš„ï¼Œå¯¹äºå»¶è¿Ÿæ•æ„Ÿçš„ä»»åŠ¡æ¥è¯´ï¼Œä»»åŠ¡çš„æ‰§è¡Œæ¬¡åºéœ€è¦èƒ½è¢«ä¸¥æ ¼æŒæ§ï¼Œè€Œä¸æ˜¯äº¤ç”±è¿è¡Œæ—¶å»è‡ªåŠ¨è°ƒåº¦ï¼Œåè€…ä¼šå¯¼è‡´ä¸å¯é¢„çŸ¥çš„å»¶è¿Ÿï¼Œä¾‹å¦‚ä¸€ä¸ª web æœåŠ¡å™¨æ€»æ˜¯æœ‰ <code>1%</code> çš„è¯·æ±‚ï¼Œå®ƒä»¬çš„å»¶è¿Ÿä¼šè¿œé«˜äºå…¶å®ƒè¯·æ±‚ï¼Œå› ä¸ºè°ƒåº¦è¿‡äºç¹å¿™å¯¼è‡´äº†éƒ¨åˆ†ä»»åŠ¡è¢«å»¶è¿Ÿè°ƒåº¦ï¼Œæœ€ç»ˆå¯¼è‡´äº†è¾ƒé«˜çš„å»¶æ—¶ã€‚æ­£å› ä¸ºæ­¤ï¼Œè¿™äº›å»¶è¿Ÿæ•æ„Ÿçš„ä»»åŠ¡éå¸¸ä¾èµ–äºè¿è¡Œæ—¶æˆ–æ“ä½œç³»ç»Ÿæä¾›è°ƒåº¦æ¬¡åºä¸Šçš„æ”¯æŒã€‚</p>
<p>ä»¥ä¸Šçš„ä¸¤ä¸ªéœ€æ±‚ï¼Œç›®å‰çš„ <code>async</code> è¿è¡Œæ—¶å¹¶ä¸èƒ½å¾ˆå¥½çš„æ”¯æŒï¼Œåœ¨æœªæ¥å¯èƒ½ä¼šæœ‰æ›´å¥½çš„æ”¯æŒï¼Œä½†åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ç”¨å¤šçº¿ç¨‹è§£å†³ã€‚</p>
<h2 id="asyncawait-ç®€å•å…¥é—¨"><a class="header" href="#asyncawait-ç®€å•å…¥é—¨">async/.await ç®€å•å…¥é—¨</a></h2>
<p><code>async/.await</code> æ˜¯ Rust å†…ç½®çš„è¯­è¨€ç‰¹æ€§ï¼Œå¯ä»¥è®©æˆ‘ä»¬ç”¨åŒæ­¥çš„æ–¹å¼å»ç¼–å†™å¼‚æ­¥çš„ä»£ç ã€‚</p>
<p>é€šè¿‡ <code>async</code> æ ‡è®°çš„è¯­æ³•å—ä¼šè¢«è½¬æ¢æˆå®ç°äº†<code>Future</code>ç‰¹å¾çš„çŠ¶æ€æœºã€‚ ä¸åŒæ­¥è°ƒç”¨é˜»å¡å½“å‰çº¿ç¨‹ä¸åŒï¼Œå½“<code>Future</code>æ‰§è¡Œå¹¶é‡åˆ°é˜»å¡æ—¶ï¼Œå®ƒä¼šè®©å‡ºå½“å‰çº¿ç¨‹çš„æ§åˆ¶æƒï¼Œè¿™æ ·å…¶å®ƒçš„<code>Future</code>å°±å¯ä»¥åœ¨è¯¥çº¿ç¨‹ä¸­è¿è¡Œï¼Œè¿™ç§æ–¹å¼å®Œå…¨ä¸ä¼šå¯¼è‡´å½“å‰çº¿ç¨‹çš„é˜»å¡ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥é€šè¿‡ä¾‹å­å­¦ä¹  <code>async/.await</code> å…³é”®å­—è¯¥å¦‚ä½•ä½¿ç”¨ï¼Œåœ¨å¼€å§‹ä¹‹å‰ï¼Œéœ€è¦å…ˆå¼•å…¥ <code>futures</code> åŒ…ã€‚ç¼–è¾‘ <code>Cargo.toml</code> æ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹:</p>
<pre><code class="language-toml">[dependencies]
futures = &quot;0.3&quot;
</code></pre>
<h4 id="ä½¿ç”¨-async"><a class="header" href="#ä½¿ç”¨-async">ä½¿ç”¨ async</a></h4>
<p>é¦–å…ˆï¼Œä½¿ç”¨ <code>async fn</code> è¯­æ³•æ¥åˆ›å»ºä¸€ä¸ªå¼‚æ­¥å‡½æ•°:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn do_something() {
    println!(&quot;go go go !&quot;);
}
<span class="boring">}</span></code></pre></pre>
<p>éœ€è¦æ³¨æ„ï¼Œ<strong>å¼‚æ­¥å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª <code>Future</code></strong>ï¼Œè‹¥ç›´æ¥è°ƒç”¨è¯¥å‡½æ•°ï¼Œä¸ä¼šè¾“å‡ºä»»ä½•ç»“æœï¼Œå› ä¸º <code>Future</code> è¿˜æœªè¢«æ‰§è¡Œï¼š</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
      do_something();
}</code></pre></pre>
<p>è¿è¡Œåï¼Œ<code>go go go</code>å¹¶æ²¡æœ‰æ‰“å°ï¼ŒåŒæ—¶ç¼–è¯‘å™¨ç»™äºˆä¸€ä¸ªæç¤ºï¼š<code>warning: unused implementer of Future that must be used</code>ï¼Œå‘Šè¯‰æˆ‘ä»¬ <code>Future</code> æœªè¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆåˆ°åº•è¯¥å¦‚ä½•ä½¿ç”¨ï¼Ÿç­”æ¡ˆæ˜¯ä½¿ç”¨ä¸€ä¸ªæ‰§è¡Œå™¨( <code>executor</code> ):</p>
<pre><pre class="playground"><code class="language-rust">// `block_on`ä¼šé˜»å¡å½“å‰çº¿ç¨‹ç›´åˆ°æŒ‡å®šçš„`Future`æ‰§è¡Œå®Œæˆï¼Œè¿™ç§é˜»å¡å½“å‰çº¿ç¨‹ä»¥ç­‰å¾…ä»»åŠ¡å®Œæˆçš„æ–¹å¼è¾ƒä¸ºç®€å•ã€ç²—æš´ï¼Œ
// å¥½åœ¨å…¶å®ƒè¿è¡Œæ—¶çš„æ‰§è¡Œå™¨(executor)ä¼šæä¾›æ›´åŠ å¤æ‚çš„è¡Œä¸ºï¼Œä¾‹å¦‚å°†å¤šä¸ª`future`è°ƒåº¦åˆ°åŒä¸€ä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œã€‚
use futures::executor::block_on;

async fn hello_world() {
    println!(&quot;hello, world!&quot;);
}

fn main() {
    let future = hello_world(); // è¿”å›ä¸€ä¸ªFuture, å› æ­¤ä¸ä¼šæ‰“å°ä»»ä½•è¾“å‡º
    block_on(future); // æ‰§è¡Œ`Future`å¹¶ç­‰å¾…å…¶è¿è¡Œå®Œæˆï¼Œæ­¤æ—¶&quot;hello, world!&quot;ä¼šè¢«æ‰“å°è¾“å‡º
}</code></pre></pre>
<h4 id="ä½¿ç”¨await"><a class="header" href="#ä½¿ç”¨await">ä½¿ç”¨.await</a></h4>
<p>åœ¨ä¸Šè¿°ä»£ç çš„<code>main</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>block_on</code>è¿™ä¸ªæ‰§è¡Œå™¨ç­‰å¾…<code>Future</code>çš„å®Œæˆï¼Œè®©ä»£ç çœ‹ä¸Šå»éå¸¸åƒæ˜¯åŒæ­¥ä»£ç ï¼Œä½†æ˜¯å¦‚æœä½ è¦åœ¨ä¸€ä¸ª<code>async fn</code>å‡½æ•°ä¸­å»è°ƒç”¨å¦ä¸€ä¸ª<code>async fn</code>å¹¶ç­‰å¾…å…¶å®Œæˆåå†æ‰§è¡Œåç»­çš„ä»£ç ï¼Œè¯¥å¦‚ä½•åšï¼Ÿä¾‹å¦‚:</p>
<pre><pre class="playground"><code class="language-rust">use futures::executor::block_on;

async fn hello_world() {
    hello_cat();
    println!(&quot;hello, world!&quot;);
}

async fn hello_cat() {
    println!(&quot;hello, kitty!&quot;);
}
fn main() {
    let future = hello_world();
    block_on(future);
}</code></pre></pre>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬åœ¨<code>hello_world</code>å¼‚æ­¥å‡½æ•°ä¸­å…ˆè°ƒç”¨äº†å¦ä¸€ä¸ªå¼‚æ­¥å‡½æ•°<code>hello_cat</code>ï¼Œç„¶åå†è¾“å‡º<code>hello, world!</code>ï¼Œçœ‹çœ‹è¿è¡Œç»“æœï¼š</p>
<pre><code class="language-console">warning: unused implementer of `futures::Future` that must be used
 --&gt; src/main.rs:6:5
  |
6 |     hello_cat();
  |     ^^^^^^^^^^^^
= note: futures do nothing unless you `.await` or poll them
...
hello, world!
</code></pre>
<p>ä¸å‡ºæ‰€æ–™ï¼Œ<code>main</code>å‡½æ•°ä¸­çš„<code>future</code>æˆ‘ä»¬é€šè¿‡<code>block_on</code>å‡½æ•°è¿›è¡Œäº†è¿è¡Œï¼Œä½†æ˜¯è¿™é‡Œçš„<code>hello_cat</code>è¿”å›çš„<code>Future</code>å´æ²¡æœ‰ä»»ä½•äººå»æ‰§è¡Œå®ƒï¼Œä¸è¿‡å¥½åœ¨ç¼–è¯‘å™¨å‹å–„çš„ç»™å‡ºäº†æç¤ºï¼š<code>futures do nothing unless you `.await` or poll them</code>ï¼Œä¸¤ç§è§£å†³æ–¹æ³•ï¼šä½¿ç”¨<code>.await</code>è¯­æ³•æˆ–è€…å¯¹<code>Future</code>è¿›è¡Œè½®è¯¢(<code>poll</code>)ã€‚</p>
<p>åè€…è¾ƒä¸ºå¤æ‚ï¼Œæš‚ä¸”ä¸è¡¨ï¼Œå…ˆæ¥ä½¿ç”¨<code>.await</code>è¯•è¯•:</p>
<pre><pre class="playground"><code class="language-rust">use futures::executor::block_on;

async fn hello_world() {
    hello_cat().await;
    println!(&quot;hello, world!&quot;);
}

async fn hello_cat() {
    println!(&quot;hello, kitty!&quot;);
}
fn main() {
    let future = hello_world();
    block_on(future);
}</code></pre></pre>
<p>ä¸º<code>hello_cat()</code>æ·»åŠ ä¸Š<code>.await</code>åï¼Œç»“æœç«‹åˆ»å¤§ä¸ºä¸åŒ:</p>
<pre><code class="language-console">hello, kitty!
hello, world!
</code></pre>
<p>è¾“å‡ºçš„é¡ºåºè·Ÿä»£ç å®šä¹‰çš„é¡ºåºå®Œå…¨ç¬¦åˆï¼Œå› æ­¤ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢ä»£ç ä¸­<strong>ä½¿ç”¨åŒæ­¥çš„ä»£ç é¡ºåºå®ç°äº†å¼‚æ­¥çš„æ‰§è¡Œæ•ˆæœ</strong>ï¼Œéå¸¸ç®€å•ã€é«˜æ•ˆï¼Œè€Œä¸”å¾ˆå¥½ç†è§£ï¼Œæœªæ¥ä¹Ÿç»å¯¹ä¸ä¼šæœ‰å›è°ƒåœ°ç‹±çš„å‘ç”Ÿã€‚</p>
<p>æ€»ä¹‹ï¼Œåœ¨<code>async fn</code>å‡½æ•°ä¸­ä½¿ç”¨<code>.await</code>å¯ä»¥ç­‰å¾…å¦ä¸€ä¸ªå¼‚æ­¥è°ƒç”¨çš„å®Œæˆã€‚<strong>ä½†æ˜¯ä¸<code>block_on</code>ä¸åŒï¼Œ<code>.await</code>å¹¶ä¸ä¼šé˜»å¡å½“å‰çš„çº¿ç¨‹</strong>ï¼Œè€Œæ˜¯å¼‚æ­¥çš„ç­‰å¾…<code>Future A</code>çš„å®Œæˆï¼Œåœ¨ç­‰å¾…çš„è¿‡ç¨‹ä¸­ï¼Œè¯¥çº¿ç¨‹è¿˜å¯ä»¥ç»§ç»­æ‰§è¡Œå…¶å®ƒçš„<code>Future B</code>ï¼Œæœ€ç»ˆå®ç°äº†å¹¶å‘å¤„ç†çš„æ•ˆæœã€‚</p>
<h4 id="ä¸€ä¸ªä¾‹å­-1"><a class="header" href="#ä¸€ä¸ªä¾‹å­-1">ä¸€ä¸ªä¾‹å­</a></h4>
<p>è€ƒè™‘ä¸€ä¸ªè½½æ­Œè½½èˆçš„ä¾‹å­ï¼Œå¦‚æœä¸ç”¨<code>.await</code>ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæœ‰å¦‚ä¸‹å®ç°ï¼š</p>
<pre><pre class="playground"><code class="language-rust">use futures::executor::block_on;

struct Song {
    author: String,
    name: String,
}

async fn learn_song() -&gt; Song {
    Song {
        author: &quot;å‘¨æ°ä¼¦&quot;.to_string(),
        name: String::from(&quot;ã€ŠèŠèŠ±å°ã€‹&quot;),
    }
}

async fn sing_song(song: Song) {
    println!(
        &quot;ç»™å¤§å®¶çŒ®ä¸Šä¸€é¦–{}çš„{} ~ {}&quot;,
        song.author, song.name, &quot;èŠèŠ±æ®‹ï¼Œæ»¡åœ°ä¼¤~ ~&quot;
    );
}

async fn dance() {
    println!(&quot;å”±åˆ°æƒ…æ·±å¤„ï¼Œèº«ä½“ä¸ç”±è‡ªä¸»çš„åŠ¨äº†èµ·æ¥~ ~&quot;);
}

fn main() {
    let song = block_on(learn_song());
    block_on(sing_song(song));
    block_on(dance());
}</code></pre></pre>
<p>å½“ç„¶ï¼Œä»¥ä¸Šä»£ç è¿è¡Œç»“æœæ— ç–‘æ˜¯æ­£ç¡®çš„ï¼Œä½†ã€‚ã€‚ã€‚å®ƒçš„æ€§èƒ½ä½•åœ¨ï¼Ÿéœ€è¦é€šè¿‡è¿ç»­ä¸‰æ¬¡é˜»å¡å»ç­‰å¾…ä¸‰ä¸ªä»»åŠ¡çš„å®Œæˆï¼Œä¸€æ¬¡åªèƒ½åšä¸€ä»¶äº‹ï¼Œå®é™…ä¸Šæˆ‘ä»¬å®Œå…¨å¯ä»¥è½½æ­Œè½½èˆå•Š:</p>
<pre><pre class="playground"><code class="language-rust">use futures::executor::block_on;

struct Song {
    author: String,
    name: String,
}

async fn learn_song() -&gt; Song {
    Song {
        author: &quot;æ›²å©‰å©·&quot;.to_string(),
        name: String::from(&quot;ã€Šæˆ‘çš„æ­Œå£°é‡Œã€‹&quot;),
    }
}

async fn sing_song(song: Song) {
    println!(
        &quot;ç»™å¤§å®¶çŒ®ä¸Šä¸€é¦–{}çš„{} ~ {}&quot;,
        song.author, song.name, &quot;ä½ å­˜åœ¨æˆ‘æ·±æ·±çš„è„‘æµ·é‡Œ~ ~&quot;
    );
}

async fn dance() {
    println!(&quot;å”±åˆ°æƒ…æ·±å¤„ï¼Œèº«ä½“ä¸ç”±è‡ªä¸»çš„åŠ¨äº†èµ·æ¥~ ~&quot;);
}

async fn learn_and_sing() {
    // è¿™é‡Œä½¿ç”¨`.await`æ¥ç­‰å¾…å­¦æ­Œçš„å®Œæˆï¼Œä½†æ˜¯å¹¶ä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹åœ¨å­¦æ­Œçš„ä»»åŠ¡`.await`åï¼Œå®Œå…¨å¯ä»¥å»æ‰§è¡Œè·³èˆçš„ä»»åŠ¡
    let song = learn_song().await;

    // å”±æ­Œå¿…é¡»è¦åœ¨å­¦æ­Œä¹‹å
    sing_song(song).await;
}

async fn async_main() {
    let f1 = learn_and_sing();
    let f2 = dance();

    // `join!`å¯ä»¥å¹¶å‘çš„å¤„ç†å’Œç­‰å¾…å¤šä¸ª`Future`ï¼Œè‹¥`learn_and_sing Future`è¢«é˜»å¡ï¼Œé‚£`dance Future`å¯ä»¥æ‹¿è¿‡çº¿ç¨‹çš„æ‰€æœ‰æƒç»§ç»­æ‰§è¡Œã€‚è‹¥`dance`ä¹Ÿå˜æˆé˜»å¡çŠ¶æ€ï¼Œé‚£`learn_and_sing`åˆå¯ä»¥å†æ¬¡æ‹¿å›çº¿ç¨‹æ‰€æœ‰æƒï¼Œç»§ç»­æ‰§è¡Œã€‚
    // è‹¥ä¸¤ä¸ªéƒ½è¢«é˜»å¡ï¼Œé‚£ä¹ˆ`async main`ä¼šå˜æˆé˜»å¡çŠ¶æ€ï¼Œç„¶åè®©å‡ºçº¿ç¨‹æ‰€æœ‰æƒï¼Œå¹¶å°†å…¶äº¤ç»™`main`å‡½æ•°ä¸­çš„`block_on`æ‰§è¡Œå™¨
    futures::join!(f1, f2);
}

fn main() {
    block_on(async_main());
}</code></pre></pre>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå­¦æ­Œå’Œå”±æ­Œå…·æœ‰æ˜æ˜¾çš„å…ˆåé¡ºåºï¼Œä½†æ˜¯è¿™ä¸¤è€…éƒ½å¯ä»¥è·Ÿè·³èˆä¸€åŒå­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯ä½ å¯ä»¥åœ¨è·³èˆçš„æ—¶å€™å­¦æ­Œï¼Œä¹Ÿå¯ä»¥åœ¨è·³èˆçš„æ—¶å€™å”±æ­Œã€‚å¦‚æœä¸Šé¢ä»£ç ä¸ä½¿ç”¨<code>.await</code>ï¼Œè€Œæ˜¯ä½¿ç”¨<code>block_on(learn_song())</code>ï¼Œ é‚£åœ¨å­¦æ­Œæ—¶ï¼Œå½“å‰çº¿ç¨‹å°±ä¼šé˜»å¡ï¼Œä¸å†å¯ä»¥åšå…¶å®ƒä»»ä½•äº‹ï¼ŒåŒ…æ‹¬è·³èˆã€‚</p>
<p>å› æ­¤<code>.await</code>å¯¹äºå®ç°å¼‚æ­¥ç¼–ç¨‹è‡³å…³é‡è¦ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨åŒä¸€ä¸ªçº¿ç¨‹å†…å¹¶å‘çš„è¿è¡Œå¤šä¸ªä»»åŠ¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªä¸€ä¸ªå…ˆåå®Œæˆã€‚è‹¥å¤§å®¶çœ‹åˆ°è¿™é‡Œè¿˜æ˜¯ä¸å¤ªæ˜ç™½ï¼Œå¼ºçƒˆå»ºè®®å›å¤´å†ä»”ç»†çœ‹ä¸€éï¼ŒåŒæ—¶äº²è‡ªä¸Šæ‰‹ä¿®æ”¹ä»£ç è¯•è¯•æ•ˆæœã€‚</p>
<p>è‡³æ­¤ï¼Œè¯»è€…åº”è¯¥å¯¹ Rust çš„<code>async/.await</code>å¼‚æ­¥ç¼–ç¨‹æœ‰äº†ä¸€ä¸ªæ¸…æ™°çš„åˆæ­¥å°è±¡ï¼Œä¸‹é¢è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹è¿™èƒŒåçš„åŸç†ï¼š<code>Future</code>å’Œä»»åŠ¡åœ¨åº•å±‚å¦‚ä½•è¢«æ‰§è¡Œã€‚</p>

                    <div id="giscus-container"></div>
                </main>

                <nav class="nav-wrapper" aria-label="Page navigation">
                    <!-- Mobile navigation buttons -->
                    <a rel="prev" href="../../../../rust/rust_holy/async-rust/async/intro.html" class="mobile-nav-chapters previous"
                        title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../../../rust/rust_holy/async-rust/async/future-excuting.html" class="mobile-nav-chapters next"
                        title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>

                    <div style="clear: both"></div>
                </nav>
            </div>
        </div>

        <nav class="nav-wide-wrapper" aria-label="Page navigation">
            <a rel="prev" href="../../../../rust/rust_holy/async-rust/async/intro.html" class="nav-chapters previous" title="Previous chapter"
                aria-label="Previous chapter" aria-keyshortcuts="Left">
                <i class="fa fa-angle-left"></i>
            </a>

            <a rel="next" href="../../../../rust/rust_holy/async-rust/async/future-excuting.html" class="nav-chapters next" title="Next chapter"
                aria-label="Next chapter" aria-keyshortcuts="Right">
                <i class="fa fa-angle-right"></i>
            </a>
        </nav>

    </div>




    <script type="text/javascript">
        window.playground_copyable = true;
    </script>

    <script src="../../../../ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../editor.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../mode-rust.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

    <script src="../../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../searcher.js" type="text/javascript" charset="utf-8"></script>

    <script src="../../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../highlight.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../../../book.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
        var pagePath = "rust/rust_holy/async-rust/async/getting-started.md"
    </script>


    <!-- Custom JS scripts -->
    <script type="text/javascript" src="../../../../assets/custom.js"></script>
    <script type="text/javascript" src="../../../../assets/bigPicture.js"></script>


</body>

</html>